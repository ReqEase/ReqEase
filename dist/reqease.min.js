/*!
 * ReqEase v1.0.1
 * (c) HichemTech
 * Released under the MIT License.
 * Github: github.com/ReqEase/ReqEase
 */(()=>{var t={765:function(t,e,s){t=s.nmd(t),
/*!
 * validate.js 0.13.1
 *
 * (c) 2013-2019 Nicklas Ansman, 2013 Wrapp
 * Validate.js may be freely distributed under the MIT license.
 * For all details and documentation:
 * http://validatejs.org/
 */
function(t,e,i){"use strict";var n=function(t,e,s){s=o.extend({},o.options,s);var i=o.runValidations(t,e,s);if(i.some((function(t){return o.isPromise(t.error)})))throw new Error("Use validate.async if you want support for promises");return n.processValidationResults(i,s)},o=n;o.extend=function(t){return[].slice.call(arguments,1).forEach((function(e){for(var s in e)t[s]=e[s]})),t},o.extend(n,{version:{major:0,minor:13,patch:1,metadata:null,toString:function(){var t=o.format("%{major}.%{minor}.%{patch}",o.version);return o.isEmpty(o.version.metadata)||(t+="+"+o.version.metadata),t}},Promise:"undefined"!=typeof Promise?Promise:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(t,e,s){var i,n,r,a,l,d,u,c=[];for(i in(o.isDomElement(t)||o.isJqueryElement(t))&&(t=o.collectFormValues(t)),e)for(n in r=o.getDeepObjectValue(t,i),a=o.result(e[i],r,t,i,s,e)){if(!(l=o.validators[n]))throw u=o.format("Unknown validator %{name}",{name:n}),new Error(u);d=a[n],(d=o.result(d,r,t,i,s,e))&&c.push({attribute:i,value:r,validator:n,globalOptions:s,attributes:t,options:d,error:l.call(l,r,d,i,t,s)})}return c},processValidationResults:function(t,e){t=o.pruneEmptyErrors(t,e),t=o.expandMultipleErrors(t,e),t=o.convertErrorMessages(t,e);var s=e.format||"grouped";if("function"!=typeof o.formatters[s])throw new Error(o.format("Unknown format %{format}",e));return t=o.formatters[s](t),o.isEmpty(t)?void 0:t},async:function(t,e,s){var i=(s=o.extend({},o.async.options,s)).wrapErrors||function(t){return t};!1!==s.cleanAttributes&&(t=o.cleanAttributes(t,e));var n=o.runValidations(t,e,s);return new o.Promise((function(r,a){o.waitForResults(n).then((function(){var l=o.processValidationResults(n,s);l?a(new i(l,s,t,e)):r(t)}),(function(t){a(t)}))}))},single:function(t,e,s){return s=o.extend({},o.single.options,s,{format:"flat",fullMessages:!1}),o({single:t},{single:e},s)},waitForResults:function(t){return t.reduce((function(t,e){return o.isPromise(e.error)?t.then((function(){return e.error.then((function(t){e.error=t||null}))})):t}),new o.Promise((function(t){t()})))},result:function(t){var e=[].slice.call(arguments,1);return"function"==typeof t&&(t=t.apply(null,e)),t},isNumber:function(t){return"number"==typeof t&&!isNaN(t)},isFunction:function(t){return"function"==typeof t},isInteger:function(t){return o.isNumber(t)&&t%1==0},isBoolean:function(t){return"boolean"==typeof t},isObject:function(t){return t===Object(t)},isDate:function(t){return t instanceof Date},isDefined:function(t){return null!=t},isPromise:function(t){return!!t&&o.isFunction(t.then)},isJqueryElement:function(t){return t&&o.isString(t.jquery)},isDomElement:function(t){return!!t&&(!(!t.querySelectorAll||!t.querySelector)&&(!(!o.isObject(document)||t!==document)||("object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName)))},isEmpty:function(t){var e;if(!o.isDefined(t))return!0;if(o.isFunction(t))return!1;if(o.isString(t))return o.EMPTY_STRING_REGEXP.test(t);if(o.isArray(t))return 0===t.length;if(o.isDate(t))return!1;if(o.isObject(t)){for(e in t)return!1;return!0}return!1},format:o.extend((function(t,e){return o.isString(t)?t.replace(o.format.FORMAT_REGEXP,(function(t,s,i){return"%"===s?"%{"+i+"}":String(e[i])})):t}),{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(t){return o.isNumber(t)?100*t%1==0?""+t:parseFloat(Math.round(100*t)/100).toFixed(2):o.isArray(t)?t.map((function(t){return o.prettify(t)})).join(", "):o.isObject(t)?o.isDefined(t.toString)?t.toString():JSON.stringify(t):(t=""+t).replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,(function(t,e,s){return e+" "+s.toLowerCase()})).toLowerCase()},stringifyValue:function(t,e){return(e&&e.prettify||o.prettify)(t)},isString:function(t){return"string"==typeof t},isArray:function(t){return"[object Array]"==={}.toString.call(t)},isHash:function(t){return o.isObject(t)&&!o.isArray(t)&&!o.isFunction(t)},contains:function(t,e){return!!o.isDefined(t)&&(o.isArray(t)?-1!==t.indexOf(e):e in t)},unique:function(t){return o.isArray(t)?t.filter((function(t,e,s){return s.indexOf(t)==e})):t},forEachKeyInKeypath:function(t,e,s){if(o.isString(e)){var i,n="",r=!1;for(i=0;i<e.length;++i)switch(e[i]){case".":r?(r=!1,n+="."):(t=s(t,n,!1),n="");break;case"\\":r?(r=!1,n+="\\"):r=!0;break;default:r=!1,n+=e[i]}return s(t,n,!0)}},getDeepObjectValue:function(t,e){if(o.isObject(t))return o.forEachKeyInKeypath(t,e,(function(t,e){if(o.isObject(t))return t[e]}))},collectFormValues:function(t,e){var s,i,n,r,a,l,d={};if(o.isJqueryElement(t)&&(t=t[0]),!t)return d;for(e=e||{},r=t.querySelectorAll("input[name], textarea[name]"),s=0;s<r.length;++s)if(n=r.item(s),!o.isDefined(n.getAttribute("data-ignored"))){var u=n.name.replace(/\./g,"\\\\.");l=o.sanitizeFormValue(n.value,e),"number"===n.type?l=l?+l:null:"checkbox"===n.type?n.attributes.value?n.checked||(l=d[u]||null):l=n.checked:"radio"===n.type&&(n.checked||(l=d[u]||null)),d[u]=l}for(r=t.querySelectorAll("select[name]"),s=0;s<r.length;++s)if(n=r.item(s),!o.isDefined(n.getAttribute("data-ignored"))){if(n.multiple)for(i in l=[],n.options)(a=n.options[i])&&a.selected&&l.push(o.sanitizeFormValue(a.value,e));else{var c=void 0!==n.options[n.selectedIndex]?n.options[n.selectedIndex].value:"";l=o.sanitizeFormValue(c,e)}d[n.name]=l}return d},sanitizeFormValue:function(t,e){return e.trim&&o.isString(t)&&(t=t.trim()),!1!==e.nullify&&""===t?null:t},capitalize:function(t){return o.isString(t)?t[0].toUpperCase()+t.slice(1):t},pruneEmptyErrors:function(t){return t.filter((function(t){return!o.isEmpty(t.error)}))},expandMultipleErrors:function(t){var e=[];return t.forEach((function(t){o.isArray(t.error)?t.error.forEach((function(s){e.push(o.extend({},t,{error:s}))})):e.push(t)})),e},convertErrorMessages:function(t,e){var s=[],i=(e=e||{}).prettify||o.prettify;return t.forEach((function(t){var n=o.result(t.error,t.value,t.attribute,t.options,t.attributes,t.globalOptions);o.isString(n)?("^"===n[0]?n=n.slice(1):!1!==e.fullMessages&&(n=o.capitalize(i(t.attribute))+" "+n),n=n.replace(/\\\^/g,"^"),n=o.format(n,{value:o.stringifyValue(t.value,e)}),s.push(o.extend({},t,{error:n}))):s.push(t)})),s},groupErrorsByAttribute:function(t){var e={};return t.forEach((function(t){var s=e[t.attribute];s?s.push(t):e[t.attribute]=[t]})),e},flattenErrorsToArray:function(t){return t.map((function(t){return t.error})).filter((function(t,e,s){return s.indexOf(t)===e}))},cleanAttributes:function(t,e){function s(t,e,s){return o.isObject(t[e])?t[e]:t[e]=!!s||{}}return o.isObject(e)&&o.isObject(t)?function t(e,s){if(!o.isObject(e))return e;var i,n,r=o.extend({},e);for(n in e)i=s[n],o.isObject(i)?r[n]=t(r[n],i):i||delete r[n];return r}(t,e=function(t){var e,i={};for(e in t)t[e]&&o.forEachKeyInKeypath(i,e,s);return i}(e)):{}},exposeModule:function(t,e,s,i,n){s?(i&&i.exports&&(s=i.exports=t),s.validate=t):(e.validate=t,t.isFunction(n)&&n.amd&&n([],(function(){return t})))},warn:function(t){"undefined"!=typeof console&&console.warn&&console.warn("[validate.js] "+t)},error:function(t){"undefined"!=typeof console&&console.error&&console.error("[validate.js] "+t)}}),n.validators={presence:function(t,e){if(!1!==(e=o.extend({},this.options,e)).allowEmpty?!o.isDefined(t):o.isEmpty(t))return e.message||this.message||"can't be blank"},length:function(t,e,s){if(o.isDefined(t)){var i,n=(e=o.extend({},this.options,e)).is,r=e.maximum,a=e.minimum,l=[],d=(t=(e.tokenizer||function(t){return t})(t)).length;return o.isNumber(d)?(o.isNumber(n)&&d!==n&&(i=e.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)",l.push(o.format(i,{count:n}))),o.isNumber(a)&&d<a&&(i=e.tooShort||this.tooShort||"is too short (minimum is %{count} characters)",l.push(o.format(i,{count:a}))),o.isNumber(r)&&d>r&&(i=e.tooLong||this.tooLong||"is too long (maximum is %{count} characters)",l.push(o.format(i,{count:r}))),l.length>0?e.message||l:void 0):e.message||this.notValid||"has an incorrect length"}},numericality:function(t,e,s,i,n){if(o.isDefined(t)){var r,a,l=[],d={greaterThan:function(t,e){return t>e},greaterThanOrEqualTo:function(t,e){return t>=e},equalTo:function(t,e){return t===e},lessThan:function(t,e){return t<e},lessThanOrEqualTo:function(t,e){return t<=e},divisibleBy:function(t,e){return t%e==0}},u=(e=o.extend({},this.options,e)).prettify||n&&n.prettify||o.prettify;if(o.isString(t)&&e.strict){var c="^-?(0|[1-9]\\d*)";if(e.onlyInteger||(c+="(\\.\\d+)?"),c+="$",!new RegExp(c).test(t))return e.message||e.notValid||this.notValid||this.message||"must be a valid number"}if(!0!==e.noStrings&&o.isString(t)&&!o.isEmpty(t)&&(t=+t),!o.isNumber(t))return e.message||e.notValid||this.notValid||this.message||"is not a number";if(e.onlyInteger&&!o.isInteger(t))return e.message||e.notInteger||this.notInteger||this.message||"must be an integer";for(r in d)if(a=e[r],o.isNumber(a)&&!d[r](t,a)){var h="not"+o.capitalize(r),p=e[h]||this[h]||this.message||"must be %{type} %{count}";l.push(o.format(p,{count:a,type:u(r)}))}return e.odd&&t%2!=1&&l.push(e.notOdd||this.notOdd||this.message||"must be odd"),e.even&&t%2!=0&&l.push(e.notEven||this.notEven||this.message||"must be even"),l.length?e.message||l:void 0}},datetime:o.extend((function(t,e){if(!o.isFunction(this.parse)||!o.isFunction(this.format))throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");if(o.isDefined(t)){var s,i=[],n=(e=o.extend({},this.options,e)).earliest?this.parse(e.earliest,e):NaN,r=e.latest?this.parse(e.latest,e):NaN;return t=this.parse(t,e),isNaN(t)||e.dateOnly&&t%864e5!=0?(s=e.notValid||e.message||this.notValid||"must be a valid date",o.format(s,{value:arguments[0]})):(!isNaN(n)&&t<n&&(s=e.tooEarly||e.message||this.tooEarly||"must be no earlier than %{date}",s=o.format(s,{value:this.format(t,e),date:this.format(n,e)}),i.push(s)),!isNaN(r)&&t>r&&(s=e.tooLate||e.message||this.tooLate||"must be no later than %{date}",s=o.format(s,{date:this.format(r,e),value:this.format(t,e)}),i.push(s)),i.length?o.unique(i):void 0)}}),{parse:null,format:null}),date:function(t,e){return e=o.extend({},e,{dateOnly:!0}),o.validators.datetime.call(o.validators.datetime,t,e)},format:function(t,e){(o.isString(e)||e instanceof RegExp)&&(e={pattern:e});var s,i=(e=o.extend({},this.options,e)).message||this.message||"is invalid",n=e.pattern;if(o.isDefined(t))return o.isString(t)?(o.isString(n)&&(n=new RegExp(e.pattern,e.flags)),(s=n.exec(t))&&s[0].length==t.length?void 0:i):i},inclusion:function(t,e){if(o.isDefined(t)&&(o.isArray(e)&&(e={within:e}),e=o.extend({},this.options,e),!o.contains(e.within,t))){var s=e.message||this.message||"^%{value} is not included in the list";return o.format(s,{value:t})}},exclusion:function(t,e){if(o.isDefined(t)&&(o.isArray(e)&&(e={within:e}),e=o.extend({},this.options,e),o.contains(e.within,t))){var s=e.message||this.message||"^%{value} is restricted";return o.isString(e.within[t])&&(t=e.within[t]),o.format(s,{value:t})}},email:o.extend((function(t,e){var s=(e=o.extend({},this.options,e)).message||this.message||"is not a valid email";if(o.isDefined(t))return o.isString(t)&&this.PATTERN.exec(t)?void 0:s}),{PATTERN:/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i}),equality:function(t,e,s,i,n){if(o.isDefined(t)){o.isString(e)&&(e={attribute:e});var r=(e=o.extend({},this.options,e)).message||this.message||"is not equal to %{attribute}";if(o.isEmpty(e.attribute)||!o.isString(e.attribute))throw new Error("The attribute must be a non empty string");var a=o.getDeepObjectValue(i,e.attribute),l=e.comparator||function(t,e){return t===e},d=e.prettify||n&&n.prettify||o.prettify;return l(t,a,e,s,i)?void 0:o.format(r,{attribute:d(e.attribute)})}},url:function(t,e){if(o.isDefined(t)){var s=(e=o.extend({},this.options,e)).message||this.message||"is not a valid url",i=e.schemes||this.schemes||["http","https"],n=e.allowLocal||this.allowLocal||!1,r=e.allowDataUrl||this.allowDataUrl||!1;if(!o.isString(t))return s;var a="^(?:(?:"+i.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",l="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";if(n?l+="?":a+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",a+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+l+")(?::\\d{2,5})?(?:[/?#]\\S*)?$",r){a="(?:"+a+")|(?:^data:(?:\\w+\\/[-+.\\w]+(?:;[\\w=]+)*)?(?:;base64)?,[A-Za-z0-9-_.!~\\*'();\\/?:@&=+$,%]*$)"}return new RegExp(a,"i").exec(t)?void 0:s}},type:o.extend((function(t,e,s,i,n){if(o.isString(e)&&(e={type:e}),o.isDefined(t)){var r,a=o.extend({},this.options,e),l=a.type;if(!o.isDefined(l))throw new Error("No type was specified");if(r=o.isFunction(l)?l:this.types[l],!o.isFunction(r))throw new Error("validate.validators.type.types."+l+" must be a function.");if(!r(t,a,s,i,n)){var d=e.message||this.messages[l]||this.message||a.message||(o.isFunction(l)?"must be of the correct type":"must be of type %{type}");return o.isFunction(d)&&(d=d(t,e,s,i,n)),o.format(d,{attribute:o.prettify(s),type:l})}}}),{types:{object:function(t){return o.isObject(t)&&!o.isArray(t)},array:o.isArray,integer:o.isInteger,number:o.isNumber,string:o.isString,date:o.isDate,boolean:o.isBoolean},messages:{}})},n.formatters={detailed:function(t){return t},flat:o.flattenErrorsToArray,grouped:function(t){var e;for(e in t=o.groupErrorsByAttribute(t))t[e]=o.flattenErrorsToArray(t[e]);return t},constraint:function(t){var e;for(e in t=o.groupErrorsByAttribute(t))t[e]=t[e].map((function(t){return t.validator})).sort();return t}},n.exposeModule(n,this,t,e,s.amdD)}.call(this,e,t,s.amdD)}},e={};function s(i){var n=e[i];if(void 0!==n)return n.exports;var o=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}s.amdD=function(){throw new Error("define cannot be used indirect")},s.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t;!function(t){t.onInit="onInit",t.everytime="everytime"}(t||(t={}));t.onInit;function e(t){return void 0===t||null==t}function i(t,e,s=[]){const i=Object.assign({},t);for(const n in t)n in e&&!s.includes(n)&&(i[n]=e[n]);return i}function n(t){if(Array.isArray(t)){const e=[];for(const s of t){if(null==s)continue;let t=r(s);void 0!==t&&e.push(t)}return e}return r(t)}function o(t){if(!e(t))return l(t)||d(t)?$(t):u(t)?t:void 0}function r(t){if(!e(t))return l(t)?t.startsWith("selector:")?$(t.substring(9)):$('[name="'+t+'"]'):d(t)?$(t):u(t)?t:void 0}function a(t,s){return t=o(t),s=o(s),e(t)||0===t.length||(e(s)||0===s.length)&&(s=t.find('button[type="submit"], #okBtn').last()),[t,s]}function l(t){return"string"==typeof t}function d(t){return"string"!=typeof t&&!("jquery"in t)}function u(t){return"string"!=typeof t&&null!=t&&"jquery"in t}class c{constructor(t){this.options=t}build(){var s,i;let[n,o]=a(this.options.form,this.options.okBtn),r=t.onInit;return e(this.options.buildMode)||("string"==typeof this.options.buildMode?Object.keys(t).includes(this.options.buildMode)&&(r=t[this.options.buildMode]):r=this.options.buildMode),this.reqEaseOptions={form:n,okBtn:o,formValidator:null!==(s=this.options.formValidator)&&void 0!==s?s:{},buildMode:r,requester:null!==(i=this.options.requester)&&void 0!==i?i:{}},this.reqEaseOptions}}class h{static Builder(t){return new c(t)}}const p={format:{defaultInvalid:"Invalid format"},length:{defaultTooShort:"Value is too short",defaultTooLong:"Value is too long",passwordTooShort:"Password must be at least %{count} characters",passwordTooLong:"Password must be at most %{count} characters"},required:"This field is required",captcha:{}},f={onSuccess:()=>{},onFailure:()=>{}};var m;!function(t){t.FULL="full",t.ONLY_DEFINED="only-defined"}(m||(m={}));const g=m.FULL;class v{static registerHandler(t){v.handlers[t.label]=t}static createHandler(t,e,s){const i=v.handlers[t];return i?new i(e,s):(console.error(`Captcha handler with label "${t}" not registered.`),null)}}v.handlers={};class b{constructor(t,e){this.formValidator=t,this.captchaOptions=e}init(t){t()}triggerRequiredError(){}}const O={label:"easycaptchajs"};class y extends b{init(t){if(this.prepare(),e(this.captchaOptions.ApiToken)){let t=$("meta[name='"+this.captchaOptions.metaName+"']");0===t.length?console.error("ApiToken is not defined, and no meta defined under name: "+this.captchaOptions.metaName):this.captchaOptions.ApiToken=t.attr("content")}$(this.target).EasyCaptcha($.extend(!0,this.formValidator.options.strings.captcha,{ReCAPTCHA_API_KEY_CLIENT:this.captchaOptions.ApiToken,autoVerification:{okBtn:this.formValidator.options.okBtn}})),t()}prepare(){if(e(this.formValidator.options.form))return void console.error("Form is not defined.");if(e(this.formValidator.options.okBtn))return void console.error("OkBtn is not defined.");let t=$("#ReCaptchaTarget");0===t.length&&(t=$('<div id="ReCaptchaTarget"></div>'),t.insertBefore(this.formValidator.options.okBtn)),this.target=t,this.captchaOptions=Object.assign(Object.assign({},q),this.formValidator.options.captcha)}triggerRequiredError(){}}y.label="easycaptchajs";const q={metaName:"google-recaptcha-api-token"};function E(t=null){if(null!==t)for(let e=0;e<t.length;e++)v.registerHandler(t[e]);else v.registerHandler(y);console.log("captchaHandlers",v.handlers)}class w{constructor(t={}){var s,i,n,o,r,l,d;if(this.options=new x,this.formValidatorStrings=t.strings?t.strings:{},this.validatorCallbacks=t.callbacks?t.callbacks:{},this.options.defaultConstraints=t.defaultConstraints?t.defaultConstraints:[],this.options.newConstraints=t.newConstraints?t.newConstraints:[],this.options.validatorsSource=null!==(s=t.validatorsSource)&&void 0!==s?s:g,this.options.customValidations=null!==(i=t.customValidations)&&void 0!==i?i:[],this.options.fieldsValidators=null!==(n=t.fieldsValidators)&&void 0!==n?n:[],this.options.inputMessageRenderer=null!==(o=t.inputMessageRenderer)&&void 0!==o?o:{},[this.options.form,this.options.okBtn]=a(t.form,t.okBtn),this.options.validationDuringLoading=null===(r=t.validationDuringLoading)||void 0===r||r,this.options.captchaHandlersToRegister=null!==(l=t.captchaHandlersToRegister)&&void 0!==l?l:[],e(this.options.captcha)){let e=t.captcha;!0===e?this.options.captcha=O:"object"==typeof(d=e)&&"label"in d&&(this.options.captcha=Object.assign(Object.assign({},O),e))}}build(){return E(),Array.isArray(this.options.captchaHandlersToRegister)?E(this.options.captchaHandlersToRegister):E([this.options.captchaHandlersToRegister]),this.options.strings=Object.assign(Object.assign({},p),this.formValidatorStrings),this.options.callbacks=Object.assign(Object.assign({},f),this.validatorCallbacks),this.options.defaultConstraints=this.buildDefaultConstraints(),this.options}buildDefaultConstraints(){var t,e,s;return R([{name:"phoneNumber",presence:!0,length:{minimum:10,maximum:10},format:{pattern:"/^[0-9]+$/"}},{name:"username",presence:!0,length:{minimum:4,maximum:255},format:{pattern:"[a-z0-9.]*"}},{name:"email",presence:!0,email:!0,length:{maximum:255}},{name:"password",presence:!0,length:{minimum:6,maximum:255,tooShort:null===(e=null===(t=this.options.strings)||void 0===t?void 0:t.length)||void 0===e?void 0:e.passwordTooShort}},{name:"password_confirmation",presence:!0,equality:"password"},{name:"fname",presence:!0,length:{minimum:3,maximum:255},format:{pattern:"[a-zA-Z]+(?:\\s[a-zA-Z]+)*"}},{name:"lname",presence:!0,length:{minimum:3,maximum:255},format:{pattern:"[a-zA-Z]+(?:\\s[a-zA-Z]+)*"}},{name:"required",presence:!0}],null!==(s=this.options.defaultConstraints)&&void 0!==s?s:[])}}function R(t,e){const s=[];for(const i of t){const t=e.find((t=>(null==t?void 0:t.name)===(null==i?void 0:i.name)));t?s.push(Object.assign(Object.assign({},i),t)):i&&s.push(i)}return s}class x{constructor(){}static Builder(t){return new w(t)}}var C,T=s(765);!function(t){let e;t.DefaultMessage=class{constructor(t,e){this.messageData=t,this.messageRenderer=e}},function(t){t.SUCCESS="success",t.DANGER="danger",t.WARNING="warning",t.INFO="info"}(e=t.MessageStatus||(t.MessageStatus={}))}(C||(C={}));var A,M,k,I,S,V,j,B,N,L,D=function(t,e,s,i){if("a"===s&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?i:"a"===s?i.call(t):i?i.value:e.get(t)},_=C.MessageStatus;class F{constructor(t,e){A.add(this),this.fieldsValidators=[],this.formValidator=new Q(x.Builder(t).build()),this.reqEaseOptions=e}build(){var t,s;return e(this.reqEaseOptions.form)||(this.formValidator.options.form=this.reqEaseOptions.form),e(this.reqEaseOptions.okBtn)||(this.formValidator.options.okBtn=this.reqEaseOptions.okBtn),D(this,A,"m",M).call(this),D(this,A,"m",k).call(this),this.formValidator.fieldsValidators=this.fieldsValidators,this.formValidator.customValidations=null!==(t=this.formValidator.options.customValidations)&&void 0!==t?t:[],this.formValidator.reqEaseOptions=this.reqEaseOptions,this.formValidator.validatorCallbacks=Object.assign({onSuccess:()=>{},onFailure:()=>{}},null!==(s=this.formValidator.options.callbacks)&&void 0!==s?s:{}),this.formValidator}}A=new WeakSet,M=function(){var t,s,i,n,o,r,a,l,d,u,c,h,p,f;T.validators.length.tooShort=e(null===(s=null===(t=this.formValidator.options.strings)||void 0===t?void 0:t.length)||void 0===s?void 0:s.defaultTooShort)?T.validators.length.tooShort:null===(n=null===(i=this.formValidator.options.strings)||void 0===i?void 0:i.length)||void 0===n?void 0:n.defaultTooShort,T.validators.length.tooLong=e(null===(r=null===(o=this.formValidator.options.strings)||void 0===o?void 0:o.length)||void 0===r?void 0:r.defaultTooLong)?T.validators.length.tooLong:null===(l=null===(a=this.formValidator.options.strings)||void 0===a?void 0:a.length)||void 0===l?void 0:l.defaultTooLong,T.validators.email.message=e(null===(u=null===(d=this.formValidator.options.strings)||void 0===d?void 0:d.format)||void 0===u?void 0:u.defaultInvalid)?T.validators.email.message:null===(h=null===(c=this.formValidator.options.strings)||void 0===c?void 0:c.format)||void 0===h?void 0:h.defaultInvalid,T.validators.presence.message=e(null===(p=this.formValidator.options.strings)||void 0===p?void 0:p.required)?T.validators.presence.message:null===(f=this.formValidator.options.strings)||void 0===f?void 0:f.required},k=function(){D(this,A,"m",I).call(this),D(this,A,"m",L).call(this)},I=function(){this.formValidator.options.validatorsSource===m.FULL?(this.formValidator.constraints=R(this.formValidator.options.defaultConstraints,this.formValidator.options.newConstraints),D(this,A,"m",S).call(this)):this.formValidator.options.validatorsSource===m.ONLY_DEFINED&&(this.formValidator.constraints=this.formValidator.options.newConstraints),D(this,A,"m",V).call(this)},S=function(){if(e(this.formValidator.options.form))return void(this.formValidator.options.validatorsSource===m.FULL&&console.error("Form is not defined. when you use 'validatorsSource' as 'FULL', you must define 'form' in ReqEaseOptions."));let t=this.formValidator.options.form.find("input, textarea, select");for(let e=0;e<t.length;e++){let s=$(t[e]),i=s.attr("name"),n=D(this,A,"m",j).call(this,s,i);this.fieldsValidators=[...this.fieldsValidators,...n]}},V=function(){var t;if(!e(this.formValidator.options.fieldsValidators))for(let s=0;s<this.formValidator.options.fieldsValidators.length;s++){let i,o,r=this.formValidator.options.fieldsValidators[s].field,a=this.formValidator.options.fieldsValidators[s].constraint;if(e(r))continue;if("function"==typeof r)o=n(r());else{if(void 0===(t=r)||"function"==typeof t)continue;o=n(r)}if(e(o))continue;i=o;let l=D(this,A,"m",j).call(this,i,a);this.fieldsValidators=[...this.fieldsValidators,...l]}},j=function(t,e){let s=D(this,A,"m",N).call(this,e);if(void 0===s)return[];let i=[];if(Array.isArray(t))for(let e=0;e<t.length;e++){let n=D(this,A,"m",B).call(this,t[e],s);void 0!==n&&i.push(n)}else{let e=D(this,A,"m",B).call(this,t,s);if(void 0===e)return i;i.push(e)}return i},B=function(t,e){let s=t.attr("data-validator-key");if("ignore"===s||"ignore"===e)return;let i=s&&""!==s?D(this,A,"m",N).call(this,s):e;if(void 0===i)return;i=Object.assign({},i);let n=`fieldValidator_${Math.floor(9e4*Math.random())+1e4}`;return i.name=n,{field:t,constraint:i,name:n}},N=function(t){var e,s;if(void 0!==t&&"string"!=typeof t)return t;let i=null===(e=this.formValidator.constraints)||void 0===e?void 0:e.find((e=>e.name===t));return null==i&&(i=null===(s=this.formValidator.constraints)||void 0===s?void 0:s.find((t=>"required"===t.name))),i},L=function(){this.formValidator.inputMessageRenderer=Object.assign(Object.assign({},H),this.formValidator.options.inputMessageRenderer)};const H={buildMessage:(t,e,s)=>$("<p class='validator-message text-"+s.status+"'>"+s.message+"</p>"),renderMessages:(t,s,i)=>{var n;let o=null!==(n=s.targetElement.parent(".form-group"))&&void 0!==n?n:s.targetElement.parent(),r=o.find(".validator-messages-parent");if(e(r)||0===r.length){let t=$('<div class="validator-messages-parent"></div>');t.appendTo(o),r=t}t.removeMessages(t,s);for(let e of i){t.buildMessage(t,s,e).appendTo(r)}},removeMessages:(t,e)=>{var s;let i=null!==(s=e.targetElement.parent(".form-group"))&&void 0!==s?s:e.targetElement.parent();i.find(".is-invalid").removeClass("is-invalid"),i.find(".is-valid").removeClass("is-valid"),i.find(".validator-messages-parent .validator-message").each((function(t,e){$(e).remove()}))},affectInput:(t,e,s)=>{let i=s[0];i.status===_.SUCCESS?e.targetElement.addClass("is-valid"):i.status===_.DANGER&&e.targetElement.addClass("is-invalid")}};var P=C.DefaultMessage;class z extends P{constructor(t,e){super(t,e)}set targetElement(t){this._targetElement=t}get targetElement(){return this._targetElement}show(){this.messageRenderer.renderMessages(this.messageRenderer,this,this.messageData),this.eventListener=()=>{this.destroy()},this.targetElement.on("input",this.eventListener),this.messageRenderer.affectInput(this.messageRenderer,this,this.messageData)}destroy(){void 0!==this.eventListener&&this.targetElement.off("input",this.eventListener),this.messageRenderer.removeMessages(this.messageRenderer,this)}}var U,W,G,Y,J,X,K=function(t,e,s,i){if("a"===s&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?i:"a"===s?i.call(t):i?i.value:e.get(t)},Z=C.MessageStatus;class Q{static Builder(t,e=h.Builder({}).build()){return new F(t,e)}constructor(t){U.add(this),this.constraints=[],this.fieldsValidators=[],this.customValidations=[],this.options=t}validate(t=f){new Promise(((t,e)=>{let s=K(this,U,"m",Y).call(this),i=K(this,U,"m",W).call(this,s);if(i)return K(this,U,"m",G).call(this,i),void t(!1);K(this,U,"m",J).call(this,(e=>{t(!!e)}))})).then((e=>{e?(this.validatorCallbacks.onSuccess(this),t.onSuccess(this)):(this.validatorCallbacks.onFailure(this),t.onFailure(this))}))}initiate(){var t;let e=K(this,U,"m",Y).call(this),s=this.fieldsValidators;for(let t=0;t<s.length;t++){let i=s[t].field,n=t=>{let s=K(this,U,"m",W).call(this,e),i=$(t.target),n=i.attr("name");s&&s[n]&&Q.showInputError(i,s[n],this.inputMessageRenderer)};i.off("change",n),i.on("change",n)}if(this.options.captcha){v.createHandler(null!==(t=this.options.captcha.label)&&void 0!==t?t:"",this,this.options.captcha).init((()=>{console.log("captcha ready")}))}}static showInputError(t,e,s){let i=[];for(let t=0;t<e.length;t++)i.push({status:Z.DANGER,message:e[t]});let n=new z(i,s);n.targetElement=t,n.show()}}U=new WeakSet,W=function(t){return(0,T.validate)($(this.options.form),t,{fullMessages:!1})},G=function(t){let e=this.fieldsValidators;for(let s=0;s<e.length;s++){let i=e[s].field,n=i.attr("name");t[n]&&Q.showInputError(i,t[n],this.inputMessageRenderer)}},Y=function(){let t={},e=this.fieldsValidators;for(let s=0;s<e.length;s++){let i=e[s].field.attr("name");t[i]=e[s].constraint,delete t[i].name}return t},J=function t(e,s=0){if(s>=this.customValidations.length)return void e(!0);(0,this.customValidations[s])((i=>{i?K(this,U,"m",t).call(this,e,s+1):e(!1)}))};class tt{constructor(t,e){this.reqEaseOptions=t,this.reqEase=e}build(){}}class et{static registerHandler(t){et.handlers[t.label]=t}static createHandler(t,e,s){const i=et.handlers[t];return i?new i(e,s):(console.error(`Modal handler with label "${t}" not registered.`),null)}}et.handlers={},function(t){let e;!function(t){let e;!function(t){t.CLOSE="close",t.REDIRECT="redirect",t.REFRESH="refresh",t.CONFIRM="confirm",t.CANCEL="cancel",t.RETRY="retry",t.CALL_FUNCTION="call-function"}(e=t.ActionType||(t.ActionType={})),t.isCloseAction=function(t){return t.actionType===e.CLOSE},t.isRedirectAction=function(t){return t.actionType===e.REDIRECT},t.isRefreshAction=function(t){return t.actionType===e.REFRESH},t.isConfirmAction=function(t){return t.actionType===e.CONFIRM},t.isCancelAction=function(t){return t.actionType===e.CANCEL},t.isRetryAction=function(t){return t.actionType===e.RETRY},t.isCallFunctionAction=function(t){return t.actionType===e.CALL_FUNCTION}}(e=t.Actions||(t.Actions={}))}(X||(X={}));var st=X.Actions.ActionType;class it{constructor(t,s){this.$modal=null,this.retry=()=>{},this.options=s,this.requester=t,this._modalCallbacks=[{onOpen:()=>{},onClose:()=>{},onAction:()=>{},onBeforeAction:(t,e)=>{e()}}],this._internalCallbacks={onOpen:()=>{for(let t=0;t<this._modalCallbacks.length;t++)e(this._modalCallbacks[t].onOpen)||this._modalCallbacks[t].onOpen()},onClose:()=>{for(let t=0;t<this._modalCallbacks.length;t++)e(this._modalCallbacks[t].onClose)||this._modalCallbacks[t].onClose()},onAction:t=>{rt(this.options)&&(t===st.CONFIRM?this.options.confirm():t===st.CANCEL&&this.options.cancel());for(let s=0;s<this._modalCallbacks.length;s++)e(this._modalCallbacks[s].onAction)||this._modalCallbacks[s].onAction(t)},onBeforeAction:(t,s)=>{for(let i=0;i<this._modalCallbacks.length;i++)e(this._modalCallbacks[i].onBeforeAction)||this._modalCallbacks[i].onBeforeAction(t,s)}},this.build()}get modalCallbacks(){return this._internalCallbacks}set modalCallbacks(t){this._modalCallbacks.push(t)}show(){}close(){}modalIsShowed(){return!1}build(){this.options.hasOwnProperty("loadingMessage")?this.buildLoadingModal(this.options):!function(t){return t.hasOwnProperty("progressMessage")}(this.options)?ot(this.options)?this.buildMessageModal(this.options):rt(this.options)?this.buildConfirmationModal(this.options):!function(t){return t.hasOwnProperty("inputs")}(this.options)?this.buildCustomModal(this.options):this.buildDataNeededModal(this.options):this.buildProgressModal(this.options)}buildLoadingModal(t){}buildProgressModal(t){}buildMessageModal(t){}buildConfirmationModal(t){}buildDataNeededModal(t){}buildCustomModal(t){}buildIcon(){return ot(this.options)?(t=this.options.icon,[].includes(t),this.options.icon):"";var t}}function nt(t){let e;return e=!1!==t?t:"bootstrap",e}function ot(t){return t.hasOwnProperty("buttons")}function rt(t){return t.hasOwnProperty("confirm")}function at(t){return"string"==typeof t&&(t.startsWith("#")||t.startsWith("rgb"))}function lt(t){return!at(t)}var dt=X.Actions;class ut extends it{constructor(t,e){super(t,e),this.retry=()=>{}}show(){let t=this;$.confirm(Object.assign(Object.assign({},Object.assign({scrollToPreviousElement:!1,scrollToPreviousElementAnimate:!1,closeIcon:!1,typeAnimated:!0},this.jconfirmOptions)),{onOpen:function(){t.$jconfirmModal=this,t.$modal=t.$jconfirmModal.$el,t.modalCallbacks.onOpen()},onClose:function(){t.modalCallbacks.onClose()}}))}close(){this.$jconfirmModal.close()}modalIsShowed(){return this.$jconfirmModal.isOpen()}buildLoadingModal(t){this.jconfirmOptions={icon:"fa fa-spinner fa-spin",title:"Loading",theme:ht(t.theme),content:t.loadingMessage,buttons:"",type:ct(t.color),columnClass:pt(t.size)}}buildProgressModal(t){}buildMessageModal(t){this.jconfirmOptions={icon:this.buildIcon(),title:t.title,theme:ht(t.theme),content:t.content,buttons:this.buildButtons(t.buttons),type:ct(t.color),columnClass:pt(t.size)}}buildConfirmationModal(t){var e,s,i,n,o,r,a,l,d,u,c,h,p,f,m,g,v;this.jconfirmOptions={icon:this.buildIcon(),title:"Confirmation",theme:ht(t.theme),content:null!==(a=null!==(e=t.confirmationMessage)&&void 0!==e?e:null===(r=null===(o=null===(n=null===(i=null===(s=this.requester)||void 0===s?void 0:s.requesterOptions)||void 0===i?void 0:i.strings)||void 0===n?void 0:n.response)||void 0===o?void 0:o.modals)||void 0===r?void 0:r.defaultConfirmationMsg)&&void 0!==a?a:"",buttons:this.buildButtons([{action:{actionType:dt.ActionType.CONFIRM},text:null!==(h=null===(c=null===(u=null===(d=null===(l=this.requester)||void 0===l?void 0:l.requesterOptions)||void 0===d?void 0:d.strings)||void 0===u?void 0:u.response)||void 0===c?void 0:c.confirmButton)&&void 0!==h?h:"Confirm",color:ct("info")},{action:{actionType:dt.ActionType.CANCEL},text:null!==(v=null===(g=null===(m=null===(f=null===(p=this.requester)||void 0===p?void 0:p.requesterOptions)||void 0===f?void 0:f.strings)||void 0===m?void 0:m.response)||void 0===g?void 0:g.cancelButton)&&void 0!==v?v:"Cancel",color:ct("default")}]),type:ct(t.color),columnClass:pt(t.size)}}buildDataNeededModal(t){var s;const i=t.inputs.map((t=>`\n            <div class="form-group">\n                <label for="${t.name}">${t.label}</label>\n                <input type="${t.type}" class="form-control" id="${t.name}" name="${t.name}">\n            </div>\n        `)).join("");let n="";e(t.message)||(n=`<p>${t.message}</p>`);const o=`\n            <div class="form pr-2 pl-2">\n                ${n}\n                ${i}\n            </div>\n        `;this.jconfirmOptions={icon:this.buildIcon(),title:t.title,theme:ht(t.theme),content:o,buttons:this.buildButtons([{action:{actionType:dt.ActionType.CONFIRM},text:"Confirm",color:null!==(s=t.color)&&void 0!==s?s:"default"},{action:{actionType:dt.ActionType.CANCEL},text:"Cancel",color:"default"}]),type:ct(t.color,"blue"),columnClass:pt(t.size)}}buildButtonAction(t){if(dt.isCloseAction(t.action))return()=>!0;if(dt.isRedirectAction(t.action)){let e=t.action,s=this;return(t,i)=>(t.$btnc.find(".btn").prop("disabled",!0),i.html(s.requester.loadingIndicator.loadingIndicatorOptions.spinnerIcon),window.location.href=e.url,!1)}if(dt.isRefreshAction(t.action)){let t=this;return(e,s)=>(e.$btnc.find(".btn").prop("disabled",!0),s.html(t.requester.loadingIndicator.loadingIndicatorOptions.spinnerIcon),window.location.reload(),!1)}if(dt.isCallFunctionAction(t.action)){let e=t.action,s=this;return(t,i)=>(t.$btnc.find(".btn").prop("disabled",!0),i.html(s.requester.loadingIndicator.loadingIndicatorOptions.spinnerIcon),"function"==typeof window[e.functionName]?window[e.functionName]():console.warn(`Function ${e.functionName} is not defined.`),!0)}return dt.isConfirmAction(t.action)||dt.isCancelAction(t.action)?()=>!0:dt.isRetryAction(t.action)?()=>(this.retry(),!0):void 0}buildButtons(t){let s={};for(let i=0;i<t.length;i++){let n=t[i],o=this;s[n.text]={text:n.text,btnClass:"btn-"+ct(n.color),action:function(){return o.modalCallbacks.onBeforeAction(n.action.actionType,(()=>{let t=o.buildButtonAction(n),s=!0;e(t)||(s=t(o.$jconfirmModal,o.$jconfirmModal.buttons[n.text].el)),s&&o.$jconfirmModal.close(),o.modalCallbacks.onAction(n.action.actionType)})),!1}}}return s}}function ct(t,s="default"){if(e(t)||at(t))return"blue";switch(t){case"success":return"green";case"error":return"red";case"warning":return"orange";case"info":return"blue";default:return s}}function ht(t){return e(t)?"light":["dark","supervan","modern","material","bootstrap","light"].includes(t)?t:"light"}function pt(t){return e(t)?"medium":["","small","medium","large","xlarge"].includes(t)?t:"medium"}ut.label="jquery-confirm";var ft=X.Actions.ActionType,mt=X.Actions;class gt extends it{constructor(t,e){super(t,e),this.retry=()=>{}}show(){let t=this;this.$modal.on("shown.bs.modal",(function(){t.modalCallbacks.onOpen()})),this.$modal.modal("show")}close(){this.$modal.modal("hide"),this.modalCallbacks.onClose()}buildLoadingModal(t){var e;this.$modal=$(`\n            <div class="modal fade" tabindex="-1" role="dialog" data-backdrop="static">\n                <div class="modal-dialog modal-dialog-centered">\n                    <div class="modal-content">\n                        <div class="d-flex justify-content-center align-items-center pt-3 pb-3">\n                            <div class="spinner-border text-primary" role="status"></div>\n                            <p class="ml-2 mb-0">${null!==(e=t.loadingMessage)&&void 0!==e?e:"Please wait..."}</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `)}buildProgressModal(t){}buildMessageModal(t){var s,i,n,o,r,a,l;let d=this.buildIcon(),u="",c=[];if(!e(t.buttons))for(let e=0;e<t.buttons.length;e++)c.push(this.buildButtonAction(t.buttons[e]));for(let t=0;t<c.length;t++){let l="";if(e(c[t].color))u+=`<button type="button" class="btn-primary" id="${null!==(s=c[t].id)&&void 0!==s?s:""}">${null!==(i=c[t].text)&&void 0!==i?i:"action"}</button>`;else{let e=c[t].color;at(e)?(""!==e&&(l=`background-color: ${e};`),u+=`<button type="button" class="btn" style="${l}" id="${null!==(n=c[t].id)&&void 0!==n?n:""}">${null!==(o=c[t].text)&&void 0!==o?o:"action"}</button>`):lt(e)&&(""!==e&&(l=` btn-${vt(e)}`),u+=`<button type="button" class="btn${l}" id="${null!==(r=c[t].id)&&void 0!==r?r:""}">${null!==(a=c[t].text)&&void 0!==a?a:"action"}</button>`)}}let h=t.content;e(h)||""===h||(h='<div class="modal-body">'+h+"</div>"),""!==u&&(u='<div class="modal-footer">'+u+"</div>");let p="";""===d&&""===t.title||(p=`<div class="modal-header"><div class="row"><h5 class="modal-title">${null!=d?d:""}${null!==(l=t.title)&&void 0!==l?l:""}</h5><div class="col-10"></div>`),this.$modal=$(`\n            <div class="modal fade" tabindex="-1" role="dialog" data-backdrop="static">\n                <div class="modal-dialog modal-dialog-centered">\n                    <div class="modal-content">\n                        ${p}\n                        ${h}\n                        ${u}\n                    </div>\n                </div>\n            </div>\n        `),this.$modal.find(".close").on("click",(()=>{this.$modal.modal("hide")}));let f=this;for(let t=0;t<c.length;t++)this.$modal.find("#"+c[t].id).on("click",(()=>{var e;f.modalCallbacks.onBeforeAction(null!==(e=c[t].actionType)&&void 0!==e?e:"unknown",(()=>{var e;c[t].action(f.$modal)&&f.$modal.modal("hide"),f.modalCallbacks.onAction(null!==(e=c[t].actionType)&&void 0!==e?e:"unknown")}))}))}buildConfirmationModal(t){var e,s,i,n,o,r,a,l,d,u,c,h,p,f,m,g,v;let b={title:"",content:null!==(a=null!==(e=t.confirmationMessage)&&void 0!==e?e:null===(r=null===(o=null===(n=null===(i=null===(s=this.requester)||void 0===s?void 0:s.requesterOptions)||void 0===i?void 0:i.strings)||void 0===n?void 0:n.response)||void 0===o?void 0:o.modals)||void 0===r?void 0:r.defaultConfirmationMsg)&&void 0!==a?a:"",buttons:[{action:{actionType:ft.CONFIRM},text:null!==(h=null===(c=null===(u=null===(d=null===(l=this.requester)||void 0===l?void 0:l.requesterOptions)||void 0===d?void 0:d.strings)||void 0===u?void 0:u.response)||void 0===c?void 0:c.confirmButton)&&void 0!==h?h:"Confirm",color:"info"},{action:{actionType:ft.CANCEL},text:null!==(v=null===(g=null===(m=null===(f=null===(p=this.requester)||void 0===p?void 0:p.requesterOptions)||void 0===f?void 0:f.strings)||void 0===m?void 0:m.response)||void 0===g?void 0:g.cancelButton)&&void 0!==v?v:"Cancel",color:"default"}]};this.buildMessageModal(b)}buildButtonAction(t){if(mt.isCloseAction(t.action))return{actionType:t.action.actionType,text:t.text,color:t.color,id:"btn-"+Math.random().toString(36).substring(2,12),action:()=>!0};if(mt.isRedirectAction(t.action)){let e=t.action,s=this;return{actionType:t.action.actionType,text:t.text,color:t.color,id:"btn-"+Math.random().toString(36).substring(2,12),action:t=>(t.find(".modal-footer .btn").prop("disabled",!0),$(this).html(s.requester.loadingIndicator.loadingIndicatorOptions.spinnerIcon),window.location.href=e.url,!1)}}if(mt.isRefreshAction(t.action)){let e=this;return{actionType:t.action.actionType,text:t.text,color:t.color,id:"btn-"+Math.random().toString(36).substring(2,12),action:t=>(t.find(".modal-footer .btn").prop("disabled",!0),$(this).html(e.requester.loadingIndicator.loadingIndicatorOptions.spinnerIcon),window.location.reload(),!1)}}if(mt.isCallFunctionAction(t.action)){let e=t.action,s=this;return{actionType:t.action.actionType,text:t.text,color:t.color,id:"btn-"+Math.random().toString(36).substring(2,12),action:t=>(t.find(".modal-footer .btn").prop("disabled",!0),$(this).html(s.requester.loadingIndicator.loadingIndicatorOptions.spinnerIcon),"function"==typeof window[e.functionName]?window[e.functionName]():console.warn(`Function ${e.functionName} is not defined.`),!0)}}return mt.isConfirmAction(t.action)?{actionType:t.action.actionType,text:t.text,color:t.color,id:"btn-confirm",action:()=>!0}:mt.isCancelAction(t.action)?{actionType:t.action.actionType,text:t.text,color:t.color,id:"btn-cancel",action:()=>!0}:mt.isRetryAction(t.action)?{actionType:t.action.actionType,text:t.text,color:t.color,id:"btn-retry",action:()=>(this.retry(),!0)}:void 0}modalIsShowed(){return this.$modal.hasClass("show")}}function vt(t){switch(t){case"success":case"warning":return t;case"error":return"danger";case"info":case"default":return"primary"}}function bt(t=null){if(null!==t)for(let e=0;e<t.length;e++)et.registerHandler(t[e]);else et.registerHandler(ut),et.registerHandler(gt);console.log("modalHandlers",et.handlers)}gt.label="bootstrap";const Ot={response:{modals:{data_needed:{title:"Almost there !",message:"You should fill the following fields to continue."},unknownErrorWithRetry:{title:"Unknown Error",message:"Unexpected response format. Please try again."},defaultConfirmationMsg:"Are you sure you want to continue?"},retryButton:"Retry",closeButton:"Close",yesButton:"Yes",noButton:"No",confirmButton:"Confirm",cancelButton:"Cancel",okButton:"OK"},loading:{loadingMessage:"Loading..."}};class yt{constructor(t,e=null){var s,i,n;this.requesterOptions=new qt,this.requesterOptionsEntered=t,this.requesterOptions.useReadyModal=null!==(s=t.useReadyModal)&&void 0!==s&&s,this.requesterOptions.loading=t.loading,this.requesterOptions.modalHandlersToRegister=null!==(i=t.modalHandlersToRegister)&&void 0!==i?i:[],this.requesterOptions.strings=$.extend(!0,Ot,null!==(n=t.strings)&&void 0!==n?n:{}),this.reqEase=e}build(){var t,s,i,n,o,r,l,d;return bt(),Array.isArray(this.requesterOptions.modalHandlersToRegister)?bt(this.requesterOptions.modalHandlersToRegister):bt([this.requesterOptions.modalHandlersToRegister]),this.requesterOptions.showConfirmModal=null!==(t=this.requesterOptionsEntered.showConfirmModal)&&void 0!==t&&t,[this.requesterOptions.form,this.requesterOptions.okBtn]=a(this.requesterOptionsEntered.form,this.requesterOptionsEntered.okBtn),e(this.requesterOptions.form)||(this.requesterOptionsEntered.request=$.extend(!0,{url:null!==(s=this.requesterOptions.form.attr("action"))&&void 0!==s?s:null,method:null!==(i=this.requesterOptions.form.attr("method"))&&void 0!==i?i:null,dataType:null!==(n=this.requesterOptions.form.attr("enctype "))&&void 0!==n?n:null},this.requesterOptionsEntered.request)),this.requesterOptions.fields=null!==(o=this.requesterOptionsEntered.fields)&&void 0!==o?o:e(this.requesterOptions.form)?[]:"auto",this.requesterOptions.requestData=null!==(r=this.requesterOptionsEntered.requestData)&&void 0!==r?r:{},this.requesterOptions.intendedRedirect=null!==(l=this.requesterOptionsEntered.intendedRedirect)&&void 0!==l?l:"key:intendedRedirect",this.requesterOptions.intendedRedirectPriority=null!==(d=this.requesterOptionsEntered.intendedRedirectPriority)&&void 0!==d&&d,this.requesterOptions.request=this.requesterOptionsEntered.request,this.requesterOptions.response=this.requesterOptionsEntered.response,this.requesterOptions}}class qt{static Builder(t,e=null){return new yt(t,e)}}var Et;!function(t){t.LOADING="loading",t.NOT_LOADING="not-loading"}(Et||(Et={}));const wt={loadingInModal:!0,modalOptions:{loadingMessage:"Verifying in progress..."},loadingIndicatorActions:{affectButton:(t,s,i)=>{e(t.requester.requesterOptions.okBtn)||(t.requester.requesterOptions.okBtn.prop("disabled",i!==Et.NOT_LOADING),i===Et.LOADING?(t.requester.requesterOptions.okBtn.data("original-content",t.requester.requesterOptions.okBtn.html()),t.requester.requesterOptions.okBtn.html(t.loadingIndicatorOptions.spinnerIcon)):t.requester.requesterOptions.okBtn.html(t.requester.requesterOptions.okBtn.data("original-content")),t.requester.requesterOptions.okBtn.data("data-loading-state",i))}}};class Rt{constructor(t,e){this.loadingIndicatorOptionsEntered=e,this.requester=t}build(){var t,s,i,n,o,r,a;let l,d,u;return l=$.extend(!0,wt,{modalOptions:{loadingMessage:null!==(o=null===(n=null===(i=null===(s=null===(t=this.requester)||void 0===t?void 0:t.requesterOptions)||void 0===s?void 0:s.strings)||void 0===i?void 0:i.loading)||void 0===n?void 0:n.loadingMessage)&&void 0!==o?o:wt.modalOptions.loadingMessage}}),d=!1!==this.requester.requesterOptions.useReadyModal?this.requester.requesterOptions.useReadyModal:"bootstrap",e(this.loadingIndicatorOptionsEntered)||(l=$.extend(!0,l,this.loadingIndicatorOptionsEntered)),u={loadingInModal:null!==(r=l.loadingInModal)&&void 0!==r&&r,loadingIndicatorActions:$.extend(!0,l.loadingIndicatorActions,{modalHandler:et.createHandler(d,this.requester,l.modalOptions)}),spinnerIcon:null!==(a=l.spinnerIcon)&&void 0!==a?a:'<div class="spinner-border" role="status"></div>'},u}}class xt{constructor(t,e){this.requester=t,this.loadingIndicatorOptions=new Rt(t,e).build()}startLoading(){return new Promise((t=>{this.loadingIndicatorOptions.loadingIndicatorActions.affectButton(this,this.loadingIndicatorOptions.loadingIndicatorActions,Et.LOADING),this.loadingIndicatorOptions.loadingInModal?(this.loadingIndicatorOptions.loadingIndicatorActions.modalHandler.show(),this.loadingIndicatorOptions.loadingIndicatorActions.modalHandler.modalCallbacks.onOpen=()=>{t(!0)}):t(!0)}))}stopLoading(){this.isLoading()&&(this.loadingIndicatorOptions.loadingInModal&&this.loadingIndicatorOptions.loadingIndicatorActions.modalHandler.close(),this.loadingIndicatorOptions.loadingIndicatorActions.affectButton(this,this.loadingIndicatorOptions.loadingIndicatorActions,Et.NOT_LOADING))}isLoading(){return this.loadingIndicatorOptions.loadingInModal?this.loadingIndicatorOptions.loadingIndicatorActions.modalHandler.modalIsShowed():!!this.requester.requesterOptions.okBtn&&this.requester.requesterOptions.okBtn.prop("disabled")}}class Ct{constructor(t,e){this.requesterOptionsEntered=t,this.requester=new ee,this.reqEase=e}build(){var t,e;return this.requesterOptionsEntered.form=null!==(t=this.requesterOptionsEntered.form)&&void 0!==t?t:this.reqEase.reqEaseOptions.form,this.requesterOptionsEntered.okBtn=null!==(e=this.requesterOptionsEntered.okBtn)&&void 0!==e?e:this.reqEase.reqEaseOptions.okBtn,this.requester.requesterOptions=qt.Builder(this.requesterOptionsEntered,this.reqEase).build(),this.requester.reqEaseOptions=this.reqEase.reqEaseOptions,this.requester.loadingIndicator=new xt(this.requester,this.requester.requesterOptions.loading),this.requester}}var Tt;!function(t){t.JSON="json",t.TEXT="text",t.HTML="html"}(Tt||(Tt={}));Tt.JSON;var At;!function(t){t.GET="GET",t.POST="POST",t.PUT="PUT",t.DELETE="DELETE"}(At||(At={}));At.POST;let Mt={url:null,data:{},dataType:Tt.JSON,headers:{},method:At.POST,beforeSend:()=>{},ajaxExtraOptions:{}};var kt,It,St=function(t,e,s,i){if("a"===s&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?i:"a"===s?i.call(t):i?i.value:e.get(t)};class Vt{constructor(t,e){kt.add(this),this.requesterOptions=t,this.requestOptionsEntered=e,this.request=new $t}build(){var t,s,n;if(this.request.requestOptions=i(St(this,kt,"m",It).call(this),null!==(t=this.requestOptionsEntered)&&void 0!==t?t:{},["ajaxExtraOptions","beforeSend","headers"]),!e(this.requesterOptions.fields))if("auto"===this.requesterOptions.fields)if(e(this.requesterOptions.form)||0===this.requesterOptions.form.length)console.error("Form is not defined.");else{let t=this.requesterOptions.form.serializeArray();console.log(t);let e={};for(let s=0;s<t.length;s++)e[t[s].name]=t[s].value;this.request.requestOptions.data=Object.assign(Object.assign({},this.request.requestOptions.data),e)}else for(let t=0;t<this.requesterOptions.fields.length;t++){let e=r(this.requesterOptions.fields[t]);0!==e.length&&(this.request.requestOptions.data[e.attr("name")]=e.val())}if(e(this.requesterOptions.requestData)||("function"==typeof this.requesterOptions.requestData?this.requesterOptions.requestData((t=>{this.request.requestOptions.data=Object.assign(Object.assign({},this.request.requestOptions.data),t)})):this.request.requestOptions.data=Object.assign(Object.assign({},this.request.requestOptions.data),this.requesterOptions.requestData)),this.request.requestOptions=i(this.request.requestOptions,null!==(n=null===(s=this.requestOptionsEntered)||void 0===s?void 0:s.ajaxExtraOptions)&&void 0!==n?n:{},["beforeSend"]),this.request.requestOptions.beforeSend=(t,s)=>{var i;for(let e in this.request.requestOptions.headers)t.setRequestHeader(e,this.request.requestOptions.headers[e]);if(!e(null===(i=this.requestOptionsEntered)||void 0===i?void 0:i.beforeSend))return this.requestOptionsEntered.beforeSend(t,s)},!1!==this.requesterOptions.intendedRedirect){let t;if("string"==typeof this.requesterOptions.intendedRedirect&&this.requesterOptions.intendedRedirect.startsWith("key:")){let e=this.requesterOptions.intendedRedirect.substring(4);t=new URL(window.location.href).searchParams.get(e)}else t="function"==typeof this.requesterOptions.intendedRedirect?this.requesterOptions.intendedRedirect():this.requesterOptions.intendedRedirect;e(t)||""===t||(this.request.requestOptions.data.__intendedRedirect__=t)}return this.request}}kt=new WeakSet,It=function(){return Mt};class $t{constructor(){this.callbacks_={onResponseSuccess:(t,e,s)=>{},onResponseError:(t,e,s)=>{},onResponse:(t,e,s)=>{},onInternalError:t=>{}}}get callbacks_(){return this._callbacks_}set callbacks_(t){this._callbacks_=t}static Builder(t,e){return new Vt(t,e)}startRequest(){e(this.requestOptions.url)?this.callbacks_.onInternalError("url is not defined"):$.ajax(this.requestOptions).done(((t,e,s)=>{this.callbacks_.onResponse(t,!1,{data:t,textStatus:e,jqXHR:s}),this.callbacks_.onResponseSuccess(t,!1,{data:t,textStatus:e,jqXHR:s})})).fail(((t,e,s)=>{this.callbacks_.onResponse(t.responseJSON,!1,{jqXHR:t,textStatus:e,errorThrown:s}),this.callbacks_.onResponseError(t.responseJSON,!1,{jqXHR:t,textStatus:e,errorThrown:s})}))}}var jt=C.DefaultMessage;class Bt extends jt{constructor(t,e,s){super(t,e),this.form=s}destroy(){this.messageRenderer.removeMessages(this.messageRenderer,this)}show(){this.messageRenderer.renderMessages(this.messageRenderer,this,this.messageData)}}const Nt={buildMessage:(t,s,i)=>{var n;let o="";if(!e(i.buttons))for(let t of i.buttons)o+=`<button class="btn btn-sm btn-outline-${null!==(n=t.color)&&void 0!==n?n:i.status}" type="button">${t.text}</button>`;""!==o&&(o=`<hr><div class="buttons mt-3 mb-2">${o}</div>`);return $("<div class='form-message alert alert-"+i.status+' alert-dismissible fade show\'><button type="button" class="close" data-dismiss="alert" aria-label="Close">\n    <span aria-hidden="true">&times;</span>\n  </button>'+i.message+o+"</div>")},renderMessages:(t,s,i)=>{if(e(s.form))return void console.error("FormMessageRenderer: form is undefined");let n=s.form,o=n.find(".form-messages-parent");if(e(o)||0===o.length){let t=$('<div class="form-messages-parent"></div>'),e=n.find(".btn").last();0===e.length&&(e=n.find('button[type="submit"]').last()),e.parent().hasClass("form-group")&&(e=e.parent()),t.insertBefore(e),o=t}t.removeMessages(t,s);for(let e of i){t.buildMessage(t,s,e).appendTo(o)}},removeMessages:(t,e)=>{e.form.find(".form-messages-parent .form-message").each((function(t,e){$(e).remove()}))}};var Lt=C.DefaultMessage;class Dt extends Lt{constructor(t,e){super(t,e)}destroy(){}show(){this.messageRenderer.renderMessages(this.messageRenderer,this,this.messageData)}}const _t={buildMessage:(t,e,s)=>$('<div class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-autohide="false"><div class="toast-header">\n    <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">\n      <span aria-hidden="true">&times;</span>\n    </button>\n  </div><div class="toast-body">'+s.message+"</div></div>"),renderMessages:(t,s,i)=>{let n=$("body").find(".form-messages-parent");if(e(n)||0===n.length){let t=$('<div style="position: fixed; bottom: 0; right: 0;" class="pr-4 pb-4"></div>');t.appendTo("body"),n=t}for(let e of i){t.buildMessage(t,s,e).appendTo(n).toast("show")}},removeMessages:(t,e)=>{}};var Ft,Ht=X.Actions;class Pt{static registerHandler(t){Pt.handlers[t.label]=t}static createHandler(t,e,s){const i=Pt.handlers[t];return i?new i(e,s):(console.error(`Response handler with label "${t}" not registered.`),null)}static showUnknownErrorWithRetry(t,e){var s,i,n,o,r,a,l,d,u,c,h,p,f,m,g,v,b,O,y,q;let E=Pt.createHandler("message",t,{buttons:[{action:{actionType:Ht.ActionType.RETRY},color:"error",text:null!==(o=null===(n=null===(i=null===(s=null==t?void 0:t.requesterOptions)||void 0===s?void 0:s.strings)||void 0===i?void 0:i.response)||void 0===n?void 0:n.retryButton)&&void 0!==o?o:""},{action:{actionType:Ht.ActionType.CLOSE},color:"default",text:null!==(d=null===(l=null===(a=null===(r=null==t?void 0:t.requesterOptions)||void 0===r?void 0:r.strings)||void 0===a?void 0:a.response)||void 0===l?void 0:l.closeButton)&&void 0!==d?d:""}],color:"error",content:{body:null!==(m=null===(f=null===(p=null===(h=null===(c=null===(u=null==t?void 0:t.requesterOptions)||void 0===u?void 0:u.strings)||void 0===c?void 0:c.response)||void 0===h?void 0:h.modals)||void 0===p?void 0:p.unknownErrorWithRetry)||void 0===f?void 0:f.message)&&void 0!==m?m:"",title:null!==(q=null===(y=null===(O=null===(b=null===(v=null===(g=null==t?void 0:t.requesterOptions)||void 0===g?void 0:g.strings)||void 0===v?void 0:v.response)||void 0===b?void 0:b.modals)||void 0===O?void 0:O.unknownErrorWithRetry)||void 0===y?void 0:y.title)&&void 0!==q?q:""},type:"medium"});E.retry=e,E.renderResponse()}}Pt.handlers={};class zt{prepare(){}constructor(t,e){this.retry=()=>{},this.response=e,this.requester=t}renderResponse(){}}function Ut(t){switch(t){case"modal-big":return"large";case"modal-medium":return"medium"}}function Wt(t){return["modal-big","modal-medium"].includes(t)}class Gt extends zt{constructor(){super(...arguments),this.message=null,this.retry=()=>{}}prepare(){var t,e,s,i,n,o,r,a,l,d;if(Wt(this.response.type)){let u=nt(this.requester.requesterOptions.useReadyModal);this.modalHandler=et.createHandler(u,this.requester,{title:null!==(s=null===(e=null===(t=this.response)||void 0===t?void 0:t.content)||void 0===e?void 0:e.title)&&void 0!==s?s:"",content:null!==(o=null===(n=null===(i=this.response)||void 0===i?void 0:i.content)||void 0===n?void 0:n.body)&&void 0!==o?o:"",buttons:null!==(a=null===(r=this.response)||void 0===r?void 0:r.buttons)&&void 0!==a?a:[],color:null!==(d=null===(l=this.response)||void 0===l?void 0:l.color)&&void 0!==d?d:"primary",size:Ut(this.response.type)}),this.modalHandler.retry=this.retry}else if("msg-in-form"===this.response.type){let t=(""!==this.response.content.title?"<b>"+this.response.content.title+"</b>: ":"")+this.response.content.body;this.message=new Bt([{message:t,status:this.response.color,buttons:this.response.buttons}],this.requester.httpResponse.httpResponseOptions.formMessageRenderer,this.requester.requesterOptions.form)}else"msg-in-toast"===this.response.type?this.message=new Dt([{message:this.response.content.body,status:this.response.color}],this.requester.httpResponse.httpResponseOptions.toastMessageRenderer):console.error("Unknown response type ('"+this.response.type+"')")}renderResponse(){this.prepare(),Wt(this.response.type)?this.modalHandler.show():e(this.message)||this.message.show()}}Gt.label="message";class Yt extends zt{prepare(){if(!e(this.response.fieldsWithErrors))for(let t in this.response.fieldsWithErrors){let e=$('[name="'+t+'"]');0!==e.length?Q.showInputError(e,this.response.fieldsWithErrors[t],this.requester.httpResponse.httpResponseOptions.inputMessageRenderer):console.error("Field with name '"+t+"' not found")}}renderResponse(){this.prepare()}}function Jt(t=null){if(null!==t)for(let e=0;e<t.length;e++)Pt.registerHandler(t[e]);else Pt.registerHandler(Gt),Pt.registerHandler(Yt)}Yt.label="fields_validation_error";class Xt{constructor(t,e){var s;this.requesterOptions=t,this.httpResponseOptionsEntered=e,this.httpResponse=new Kt,this.httpResponseOptionsEntered.responseHandlersToRegister=null!==(s=e.responseHandlersToRegister)&&void 0!==s?s:[]}build(){return Jt(),Array.isArray(this.httpResponseOptionsEntered.responseHandlersToRegister)?Jt(this.httpResponseOptionsEntered.responseHandlersToRegister):Jt([this.httpResponseOptionsEntered.responseHandlersToRegister]),this.httpResponse.httpResponseOptions=$.extend(!0,{autoResponseRender:!0,rejectUnknownResponse:!0,callbacks:{onResponse:()=>{},onResponseError:()=>{},onResponseSuccess:()=>{},onInternalError:()=>{}},inputMessageRenderer:H,formMessageRenderer:Nt,toastMessageRenderer:_t,responseHandlersToRegister:[]},this.httpResponseOptionsEntered),this.httpResponse}}!function(t){function s(t){return!e(t)&&"object"==typeof t&&"version"in t&&"httpCode"in t}function i(t){return"type"in t&&!e(t.type)&&"content"in t}function n(t){return"progress"in t&&!e(t.progress)&&"maxProgress"in t&&!e(t.maxProgress)}function o(t){return"neededData"in t&&!e(t.neededData)}function r(t){return"fieldsWithErrors"in t}t.isResponse=s,t.isCustomResponse=function(t){return!e(t)&&"object"==typeof t&&"label"in t&&!e(t.label)},t.isMessageResponse=i,t.isProgressResponse=n,t.isDataNeededResponse=o,t.isFieldsValidationErrorResponse=r,t.getResponseLabel=function(t){if(s(t)){if(i(t))return"message";if(n(t))return"progress";if(o(t))return"data_needed";if(r(t))return"fields_validation_error"}return t.label}}(Ft||(Ft={}));class Kt{static Builder(t,e){return new Xt(t,e)}handle(t,s){if(this.httpResponseOptions.callbacks.onResponse(t,!1,s),!this.httpResponseOptions.autoResponseRender)return;if(!Ft.isResponse(t)&&!Ft.isCustomResponse(t))return void(this.httpResponseOptions.rejectUnknownResponse&&Pt.showUnknownErrorWithRetry(this.requester,(()=>{this.requester.retry()})));let i=Ft.getResponseLabel(t);console.log("label",i);let n=Pt.createHandler(i,this.requester,t);e(n)||n.renderResponse()}}var Zt,Qt,te=function(t,e,s,i){if("a"===s&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?i:"a"===s?i.call(t):i?i.value:e.get(t)};class ee{constructor(){Zt.add(this)}static Builder(t,e=null){return new Ct(t,e)}init(){if(e(this.reqEaseOptions)){if(e(this.requesterOptions.okBtn))return void console.error("okBtn is required");this.requesterOptions.okBtn.on("click",(()=>{this.start()}))}else this.start()}addParams(t){this.httpRequest.requestOptions.data=Object.assign(Object.assign({},this.httpRequest.requestOptions.data),t)}start(){te(this,Zt,"m",Qt).call(this),console.log("Requester started"),this.httpRequest.callbacks_={onResponseSuccess:(t,e,s)=>{this.httpResponse.handle(t,s)},onResponseError:(t,e,s)=>{this.httpResponse.handle(t,s)},onResponse:(t,e,s)=>{this.loadingIndicator.stopLoading()},onInternalError:t=>{console.error("internal error",t),this.loadingIndicator.stopLoading()}},new Promise((t=>{if(this.requesterOptions.showConfirmModal){let e=nt(this.requesterOptions.useReadyModal),s=et.createHandler(e,this,{confirm:()=>{t(!0)},cancel:()=>{t(!1)}});null==s||s.show()}else t(!0)})).then((t=>{t&&new Promise((t=>{this.loadingIndicator.isLoading()?t(!0):this.loadingIndicator.startLoading().then((()=>t(!0)))})).then((()=>{this.httpRequest.startRequest()}))}))}retry(){this.start()}}Zt=new WeakSet,Qt=function(){console.log("Requester prepare",this.requesterOptions),this.httpRequest=$t.Builder(this.requesterOptions,this.requesterOptions.request).build(),this.httpResponse=Kt.Builder(this.requesterOptions,this.requesterOptions.response).build(),this.httpRequest.requester=this,this.httpResponse.requester=this,this.httpRequest.requesterOptions=this.requesterOptions,this.httpResponse.requesterOptions=this.requesterOptions};var se,ie,ne=function(t,e,s,i){if("a"===s&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?i:"a"===s?i.call(t):i?i.value:e.get(t)};class oe{constructor(t={}){se.add(this),this.reqEaseOptions=h.Builder(t).build(),oe.Builder(t,this).build(),ne(this,se,"m",ie).call(this),this.start()}static Builder(t,e){return new tt(t,e)}start(){console.log(this.requester),this.reqEaseOptions.buildMode===t.everytime&&ne(this,se,"m",ie).call(this),e(this.reqEaseOptions.okBtn)?console.error("okBtn is required"):(this.formValidator.initiate(),this.reqEaseOptions.okBtn.on("click",(()=>{new Promise((t=>{this.formValidator.options.validationDuringLoading?this.requester.loadingIndicator.startLoading().then((()=>t(!0))):t(!0)})).then((()=>{this.formValidator.validate({onSuccess:()=>{this.requester.init()},onFailure:()=>{console.log("validation failed -_-",this.requester.loadingIndicator.isLoading()),this.requester.loadingIndicator.stopLoading()}})}))})))}}function re(t){let e=$(this).data("reqease");return void 0!==e||(e=new oe($.extend(!0,t,{form:$(this)})),$(this).data("reqease",e)),e}se=new WeakSet,ie=function(){var t,s;e(this.reqEaseOptions.form)||this.reqEaseOptions.form.on("submit",(t=>{t.preventDefault()})),this.formValidator=Q.Builder(null!==(t=this.reqEaseOptions.formValidator)&&void 0!==t?t:{},this.reqEaseOptions).build(),this.requester=ee.Builder(null!==(s=this.reqEaseOptions.requester)&&void 0!==s?s:{},this).build()},jQuery.fn.ReqEase=re,window.ReqEase=oe,window.Requester=ee,window.FormValidator=Q})()})();