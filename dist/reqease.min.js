/*!
 * ReqEase v1.0.0
 * (c) HichemTech
 * Released under the MIT License.
 * Github: github.com/HichemTab-tech/ReqEase
 */(()=>{var t={765:function(t,e,i){t=i.nmd(t),
/*!
 * validate.js 0.13.1
 *
 * (c) 2013-2019 Nicklas Ansman, 2013 Wrapp
 * Validate.js may be freely distributed under the MIT license.
 * For all details and documentation:
 * http://validatejs.org/
 */
function(t,e,n){"use strict";var s=function(t,e,i){i=o.extend({},o.options,i);var n=o.runValidations(t,e,i);if(n.some((function(t){return o.isPromise(t.error)})))throw new Error("Use validate.async if you want support for promises");return s.processValidationResults(n,i)},o=s;o.extend=function(t){return[].slice.call(arguments,1).forEach((function(e){for(var i in e)t[i]=e[i]})),t},o.extend(s,{version:{major:0,minor:13,patch:1,metadata:null,toString:function(){var t=o.format("%{major}.%{minor}.%{patch}",o.version);return o.isEmpty(o.version.metadata)||(t+="+"+o.version.metadata),t}},Promise:"undefined"!=typeof Promise?Promise:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(t,e,i){var n,s,r,a,l,d,u,c=[];for(n in(o.isDomElement(t)||o.isJqueryElement(t))&&(t=o.collectFormValues(t)),e)for(s in r=o.getDeepObjectValue(t,n),a=o.result(e[n],r,t,n,i,e)){if(!(l=o.validators[s]))throw u=o.format("Unknown validator %{name}",{name:s}),new Error(u);d=a[s],(d=o.result(d,r,t,n,i,e))&&c.push({attribute:n,value:r,validator:s,globalOptions:i,attributes:t,options:d,error:l.call(l,r,d,n,t,i)})}return c},processValidationResults:function(t,e){t=o.pruneEmptyErrors(t,e),t=o.expandMultipleErrors(t,e),t=o.convertErrorMessages(t,e);var i=e.format||"grouped";if("function"!=typeof o.formatters[i])throw new Error(o.format("Unknown format %{format}",e));return t=o.formatters[i](t),o.isEmpty(t)?void 0:t},async:function(t,e,i){var n=(i=o.extend({},o.async.options,i)).wrapErrors||function(t){return t};!1!==i.cleanAttributes&&(t=o.cleanAttributes(t,e));var s=o.runValidations(t,e,i);return new o.Promise((function(r,a){o.waitForResults(s).then((function(){var l=o.processValidationResults(s,i);l?a(new n(l,i,t,e)):r(t)}),(function(t){a(t)}))}))},single:function(t,e,i){return i=o.extend({},o.single.options,i,{format:"flat",fullMessages:!1}),o({single:t},{single:e},i)},waitForResults:function(t){return t.reduce((function(t,e){return o.isPromise(e.error)?t.then((function(){return e.error.then((function(t){e.error=t||null}))})):t}),new o.Promise((function(t){t()})))},result:function(t){var e=[].slice.call(arguments,1);return"function"==typeof t&&(t=t.apply(null,e)),t},isNumber:function(t){return"number"==typeof t&&!isNaN(t)},isFunction:function(t){return"function"==typeof t},isInteger:function(t){return o.isNumber(t)&&t%1==0},isBoolean:function(t){return"boolean"==typeof t},isObject:function(t){return t===Object(t)},isDate:function(t){return t instanceof Date},isDefined:function(t){return null!=t},isPromise:function(t){return!!t&&o.isFunction(t.then)},isJqueryElement:function(t){return t&&o.isString(t.jquery)},isDomElement:function(t){return!!t&&(!(!t.querySelectorAll||!t.querySelector)&&(!(!o.isObject(document)||t!==document)||("object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName)))},isEmpty:function(t){var e;if(!o.isDefined(t))return!0;if(o.isFunction(t))return!1;if(o.isString(t))return o.EMPTY_STRING_REGEXP.test(t);if(o.isArray(t))return 0===t.length;if(o.isDate(t))return!1;if(o.isObject(t)){for(e in t)return!1;return!0}return!1},format:o.extend((function(t,e){return o.isString(t)?t.replace(o.format.FORMAT_REGEXP,(function(t,i,n){return"%"===i?"%{"+n+"}":String(e[n])})):t}),{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(t){return o.isNumber(t)?100*t%1==0?""+t:parseFloat(Math.round(100*t)/100).toFixed(2):o.isArray(t)?t.map((function(t){return o.prettify(t)})).join(", "):o.isObject(t)?o.isDefined(t.toString)?t.toString():JSON.stringify(t):(t=""+t).replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,(function(t,e,i){return e+" "+i.toLowerCase()})).toLowerCase()},stringifyValue:function(t,e){return(e&&e.prettify||o.prettify)(t)},isString:function(t){return"string"==typeof t},isArray:function(t){return"[object Array]"==={}.toString.call(t)},isHash:function(t){return o.isObject(t)&&!o.isArray(t)&&!o.isFunction(t)},contains:function(t,e){return!!o.isDefined(t)&&(o.isArray(t)?-1!==t.indexOf(e):e in t)},unique:function(t){return o.isArray(t)?t.filter((function(t,e,i){return i.indexOf(t)==e})):t},forEachKeyInKeypath:function(t,e,i){if(o.isString(e)){var n,s="",r=!1;for(n=0;n<e.length;++n)switch(e[n]){case".":r?(r=!1,s+="."):(t=i(t,s,!1),s="");break;case"\\":r?(r=!1,s+="\\"):r=!0;break;default:r=!1,s+=e[n]}return i(t,s,!0)}},getDeepObjectValue:function(t,e){if(o.isObject(t))return o.forEachKeyInKeypath(t,e,(function(t,e){if(o.isObject(t))return t[e]}))},collectFormValues:function(t,e){var i,n,s,r,a,l,d={};if(o.isJqueryElement(t)&&(t=t[0]),!t)return d;for(e=e||{},r=t.querySelectorAll("input[name], textarea[name]"),i=0;i<r.length;++i)if(s=r.item(i),!o.isDefined(s.getAttribute("data-ignored"))){var u=s.name.replace(/\./g,"\\\\.");l=o.sanitizeFormValue(s.value,e),"number"===s.type?l=l?+l:null:"checkbox"===s.type?s.attributes.value?s.checked||(l=d[u]||null):l=s.checked:"radio"===s.type&&(s.checked||(l=d[u]||null)),d[u]=l}for(r=t.querySelectorAll("select[name]"),i=0;i<r.length;++i)if(s=r.item(i),!o.isDefined(s.getAttribute("data-ignored"))){if(s.multiple)for(n in l=[],s.options)(a=s.options[n])&&a.selected&&l.push(o.sanitizeFormValue(a.value,e));else{var c=void 0!==s.options[s.selectedIndex]?s.options[s.selectedIndex].value:"";l=o.sanitizeFormValue(c,e)}d[s.name]=l}return d},sanitizeFormValue:function(t,e){return e.trim&&o.isString(t)&&(t=t.trim()),!1!==e.nullify&&""===t?null:t},capitalize:function(t){return o.isString(t)?t[0].toUpperCase()+t.slice(1):t},pruneEmptyErrors:function(t){return t.filter((function(t){return!o.isEmpty(t.error)}))},expandMultipleErrors:function(t){var e=[];return t.forEach((function(t){o.isArray(t.error)?t.error.forEach((function(i){e.push(o.extend({},t,{error:i}))})):e.push(t)})),e},convertErrorMessages:function(t,e){var i=[],n=(e=e||{}).prettify||o.prettify;return t.forEach((function(t){var s=o.result(t.error,t.value,t.attribute,t.options,t.attributes,t.globalOptions);o.isString(s)?("^"===s[0]?s=s.slice(1):!1!==e.fullMessages&&(s=o.capitalize(n(t.attribute))+" "+s),s=s.replace(/\\\^/g,"^"),s=o.format(s,{value:o.stringifyValue(t.value,e)}),i.push(o.extend({},t,{error:s}))):i.push(t)})),i},groupErrorsByAttribute:function(t){var e={};return t.forEach((function(t){var i=e[t.attribute];i?i.push(t):e[t.attribute]=[t]})),e},flattenErrorsToArray:function(t){return t.map((function(t){return t.error})).filter((function(t,e,i){return i.indexOf(t)===e}))},cleanAttributes:function(t,e){function i(t,e,i){return o.isObject(t[e])?t[e]:t[e]=!!i||{}}return o.isObject(e)&&o.isObject(t)?function t(e,i){if(!o.isObject(e))return e;var n,s,r=o.extend({},e);for(s in e)n=i[s],o.isObject(n)?r[s]=t(r[s],n):n||delete r[s];return r}(t,e=function(t){var e,n={};for(e in t)t[e]&&o.forEachKeyInKeypath(n,e,i);return n}(e)):{}},exposeModule:function(t,e,i,n,s){i?(n&&n.exports&&(i=n.exports=t),i.validate=t):(e.validate=t,t.isFunction(s)&&s.amd&&s([],(function(){return t})))},warn:function(t){"undefined"!=typeof console&&console.warn&&console.warn("[validate.js] "+t)},error:function(t){"undefined"!=typeof console&&console.error&&console.error("[validate.js] "+t)}}),s.validators={presence:function(t,e){if(!1!==(e=o.extend({},this.options,e)).allowEmpty?!o.isDefined(t):o.isEmpty(t))return e.message||this.message||"can't be blank"},length:function(t,e,i){if(o.isDefined(t)){var n,s=(e=o.extend({},this.options,e)).is,r=e.maximum,a=e.minimum,l=[],d=(t=(e.tokenizer||function(t){return t})(t)).length;return o.isNumber(d)?(o.isNumber(s)&&d!==s&&(n=e.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)",l.push(o.format(n,{count:s}))),o.isNumber(a)&&d<a&&(n=e.tooShort||this.tooShort||"is too short (minimum is %{count} characters)",l.push(o.format(n,{count:a}))),o.isNumber(r)&&d>r&&(n=e.tooLong||this.tooLong||"is too long (maximum is %{count} characters)",l.push(o.format(n,{count:r}))),l.length>0?e.message||l:void 0):e.message||this.notValid||"has an incorrect length"}},numericality:function(t,e,i,n,s){if(o.isDefined(t)){var r,a,l=[],d={greaterThan:function(t,e){return t>e},greaterThanOrEqualTo:function(t,e){return t>=e},equalTo:function(t,e){return t===e},lessThan:function(t,e){return t<e},lessThanOrEqualTo:function(t,e){return t<=e},divisibleBy:function(t,e){return t%e==0}},u=(e=o.extend({},this.options,e)).prettify||s&&s.prettify||o.prettify;if(o.isString(t)&&e.strict){var c="^-?(0|[1-9]\\d*)";if(e.onlyInteger||(c+="(\\.\\d+)?"),c+="$",!new RegExp(c).test(t))return e.message||e.notValid||this.notValid||this.message||"must be a valid number"}if(!0!==e.noStrings&&o.isString(t)&&!o.isEmpty(t)&&(t=+t),!o.isNumber(t))return e.message||e.notValid||this.notValid||this.message||"is not a number";if(e.onlyInteger&&!o.isInteger(t))return e.message||e.notInteger||this.notInteger||this.message||"must be an integer";for(r in d)if(a=e[r],o.isNumber(a)&&!d[r](t,a)){var h="not"+o.capitalize(r),p=e[h]||this[h]||this.message||"must be %{type} %{count}";l.push(o.format(p,{count:a,type:u(r)}))}return e.odd&&t%2!=1&&l.push(e.notOdd||this.notOdd||this.message||"must be odd"),e.even&&t%2!=0&&l.push(e.notEven||this.notEven||this.message||"must be even"),l.length?e.message||l:void 0}},datetime:o.extend((function(t,e){if(!o.isFunction(this.parse)||!o.isFunction(this.format))throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");if(o.isDefined(t)){var i,n=[],s=(e=o.extend({},this.options,e)).earliest?this.parse(e.earliest,e):NaN,r=e.latest?this.parse(e.latest,e):NaN;return t=this.parse(t,e),isNaN(t)||e.dateOnly&&t%864e5!=0?(i=e.notValid||e.message||this.notValid||"must be a valid date",o.format(i,{value:arguments[0]})):(!isNaN(s)&&t<s&&(i=e.tooEarly||e.message||this.tooEarly||"must be no earlier than %{date}",i=o.format(i,{value:this.format(t,e),date:this.format(s,e)}),n.push(i)),!isNaN(r)&&t>r&&(i=e.tooLate||e.message||this.tooLate||"must be no later than %{date}",i=o.format(i,{date:this.format(r,e),value:this.format(t,e)}),n.push(i)),n.length?o.unique(n):void 0)}}),{parse:null,format:null}),date:function(t,e){return e=o.extend({},e,{dateOnly:!0}),o.validators.datetime.call(o.validators.datetime,t,e)},format:function(t,e){(o.isString(e)||e instanceof RegExp)&&(e={pattern:e});var i,n=(e=o.extend({},this.options,e)).message||this.message||"is invalid",s=e.pattern;if(o.isDefined(t))return o.isString(t)?(o.isString(s)&&(s=new RegExp(e.pattern,e.flags)),(i=s.exec(t))&&i[0].length==t.length?void 0:n):n},inclusion:function(t,e){if(o.isDefined(t)&&(o.isArray(e)&&(e={within:e}),e=o.extend({},this.options,e),!o.contains(e.within,t))){var i=e.message||this.message||"^%{value} is not included in the list";return o.format(i,{value:t})}},exclusion:function(t,e){if(o.isDefined(t)&&(o.isArray(e)&&(e={within:e}),e=o.extend({},this.options,e),o.contains(e.within,t))){var i=e.message||this.message||"^%{value} is restricted";return o.isString(e.within[t])&&(t=e.within[t]),o.format(i,{value:t})}},email:o.extend((function(t,e){var i=(e=o.extend({},this.options,e)).message||this.message||"is not a valid email";if(o.isDefined(t))return o.isString(t)&&this.PATTERN.exec(t)?void 0:i}),{PATTERN:/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i}),equality:function(t,e,i,n,s){if(o.isDefined(t)){o.isString(e)&&(e={attribute:e});var r=(e=o.extend({},this.options,e)).message||this.message||"is not equal to %{attribute}";if(o.isEmpty(e.attribute)||!o.isString(e.attribute))throw new Error("The attribute must be a non empty string");var a=o.getDeepObjectValue(n,e.attribute),l=e.comparator||function(t,e){return t===e},d=e.prettify||s&&s.prettify||o.prettify;return l(t,a,e,i,n)?void 0:o.format(r,{attribute:d(e.attribute)})}},url:function(t,e){if(o.isDefined(t)){var i=(e=o.extend({},this.options,e)).message||this.message||"is not a valid url",n=e.schemes||this.schemes||["http","https"],s=e.allowLocal||this.allowLocal||!1,r=e.allowDataUrl||this.allowDataUrl||!1;if(!o.isString(t))return i;var a="^(?:(?:"+n.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",l="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";if(s?l+="?":a+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",a+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+l+")(?::\\d{2,5})?(?:[/?#]\\S*)?$",r){a="(?:"+a+")|(?:^data:(?:\\w+\\/[-+.\\w]+(?:;[\\w=]+)*)?(?:;base64)?,[A-Za-z0-9-_.!~\\*'();\\/?:@&=+$,%]*$)"}return new RegExp(a,"i").exec(t)?void 0:i}},type:o.extend((function(t,e,i,n,s){if(o.isString(e)&&(e={type:e}),o.isDefined(t)){var r,a=o.extend({},this.options,e),l=a.type;if(!o.isDefined(l))throw new Error("No type was specified");if(r=o.isFunction(l)?l:this.types[l],!o.isFunction(r))throw new Error("validate.validators.type.types."+l+" must be a function.");if(!r(t,a,i,n,s)){var d=e.message||this.messages[l]||this.message||a.message||(o.isFunction(l)?"must be of the correct type":"must be of type %{type}");return o.isFunction(d)&&(d=d(t,e,i,n,s)),o.format(d,{attribute:o.prettify(i),type:l})}}}),{types:{object:function(t){return o.isObject(t)&&!o.isArray(t)},array:o.isArray,integer:o.isInteger,number:o.isNumber,string:o.isString,date:o.isDate,boolean:o.isBoolean},messages:{}})},s.formatters={detailed:function(t){return t},flat:o.flattenErrorsToArray,grouped:function(t){var e;for(e in t=o.groupErrorsByAttribute(t))t[e]=o.flattenErrorsToArray(t[e]);return t},constraint:function(t){var e;for(e in t=o.groupErrorsByAttribute(t))t[e]=t[e].map((function(t){return t.validator})).sort();return t}},s.exposeModule(s,this,t,e,i.amdD)}.call(this,e,t,i.amdD)}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var o=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.amdD=function(){throw new Error("define cannot be used indirect")},i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t;!function(t){t.ON_INIT="onInit",t.EVERYTIME="everytime"}(t||(t={}));t.ON_INIT;function e(t){return void 0===t||null==t}function n(t,e,i=[]){const n=Object.assign({},t);for(const s in t)s in e&&!i.includes(s)&&(n[s]=e[s]);return n}function s(t){if(Array.isArray(t)){const e=[];for(const i of t){if(null==i)continue;let t=r(i);void 0!==t&&e.push(t)}return e}return r(t)}function o(t){if(!e(t))return a(t)||l(t)?$(t):d(t)?t:void 0}function r(t){if(!e(t))return a(t)?t.startsWith("selector:")?$(t.substring(9)):$('[name="'+t+'"]'):l(t)?$(t):d(t)?t:void 0}function a(t){return"string"==typeof t}function l(t){return"string"!=typeof t&&!("jquery"in t)}function d(t){return"string"!=typeof t&&null!=t&&"jquery"in t}class u{constructor(t){this.options=t}build(){var e,i,n;return this.reqEaseOptions={form:o(this.options.form),okBtn:o(this.options.okBtn),validation:null!==(e=this.options.validation)&&void 0!==e?e:{},buildMode:null!==(i=this.options.buildMode)&&void 0!==i?i:t.ON_INIT,requester:null!==(n=this.options.requester)&&void 0!==n?n:{}},this.reqEaseOptions}}class c{static Builder(t){return new u(t)}}const h={format:{defaultInvalid:"Invalid format"},length:{defaultTooShort:"Value is too short",defaultTooLong:"Value is too long",passwordTooShort:"Password must be at least %{count} characters",passwordTooLong:"Password must be at most %{count} characters"},required:"This field is required",captcha:{}},p={onSuccess:()=>{},onFailure:()=>{}};var f;!function(t){t.Auto="auto",t.Manual="manual"}(f||(f={}));const m=f.Auto;var g;!function(t){t.FULL="full",t.ONLY_DEFINED="only-defined"}(g||(g={}));const v=g.FULL;class b{static registerHandler(t){b.handlers[t.label]=t}static createHandler(t,e,i){const n=b.handlers[t];return n?new n(e,i):(console.error(`Captcha handler with label "${t}" not registered.`),null)}}b.handlers={};const y=function(t={},...e){let i=null===t;if(null===t&&(t={}),0===$(this).length&&!i)throw"no ReCaptcha div parent.";let n=[];const s={getTarget:function(t,e,i){if(0!==i.length){if(i[0].startsWith("#")&&(i[0]=i[0].substring(1)),i[0]===e.parentId){let i={parentElement:$("#"+e.parentId),data:e};t.push(i)}}else{let i={parentElement:$("#"+e.parentId),data:e};t.push(i)}return t},verify:function(t,e,i){if(0!==i.length){if(i[0].startsWith("#")&&(i[0]=i[0].substring(1)),i[0]===e.parentId){let i={verified:""!==E.getResponse(e.widgetId)};t.push(i)}}else{let i={parentElement:$("#"+e.parentId),verified:""!==E.getResponse(e.widgetId)};t.push(i)}return t},response:function(t,e,i){if(0!==i.length){if(i[0].startsWith("#")&&(i[0]=i[0].substring(1)),i[0]===e.parentId){let i={token:E.getResponse(e.widgetId)};t.push(i)}}else{let i={parentElement:$("#"+e.parentId),token:E.getResponse(e.widgetId)};t.push(i)}return t},reset:function(t,e,i){return 0!==i.length?(i[0].startsWith("#")&&(i[0]=i[0].substring(1)),i[0]===e.parentId&&E.reset(e.widgetId)):E.reset(),t},destroy:function(t,e){let i=$("#"+e.parentId);return i.empty(),i.removeData("EasyCaptcha"),t}};if("object"==typeof t)O($(this),0,t,i);else for(let i=0;i<$(this).length;i++){let o=$($(this)[i]).data("EasyCaptcha");o&&void 0!==s[t]&&(n=s[t](n,o,[...e]))}return n.length>1?n:0===n.length?null:n[0]};function O(t,e,i,n){if(t.length===e)return;let s,o=$(t[e]),r=o.data("EasyCaptcha");if(r)O(t,e+1,i,n);else{r={},r.AUTO_INIT=n,s=$.extend(!0,{ReCAPTCHA_API_KEY_CLIENT:null,ReCaptchaSubmit:{success:()=>{},failed:()=>{},expired:()=>{}},autoVerification:{okBtn:null,requiredMsg:"<div class='alert alert-danger'>Please verify that you are not a robot.</div>"},apiScriptLoading:{loadingMsg:'<div class="spinner-border text-primary" role="status"></div>',error:()=>{},errorMsg:"<div class='alert alert-danger'>Error while loading Api Script. <b class='retry-load-api-script clickable'>retry</b></div>"},theme:"light",failure:t=>{console.error(t)}},i);let a=$('meta[name="ReCAPTCHA_API_KEY_CLIENT"]');if(0!==a.length&&(s.ReCAPTCHA_API_KEY_CLIENT=a.attr("content")),C(o.attr("data-okbtn-selector"))&&(s.autoVerification.okBtn=o.attr("data-okbtn-selector")),C(o.attr("data-recaptcha-apikey"))&&(s.ReCAPTCHA_API_KEY_CLIENT=o.attr("data-recaptcha-apikey")),C(o.attr("data-required-msg-example-selector"))){let t=$(o.attr("data-required-msg-example-selector")).clone();t.removeClass("hidden"),t.removeClass("d-none"),s.autoVerification.requiredMsg=t}if(C(o.attr("data-loading-msg-example-selector"))){let t=$(o.attr("data-loading-msg-example-selector")).clone();t.removeClass("hidden"),t.removeClass("d-none"),s.apiScriptLoading.loadingMsg=t}if(C(o.attr("data-error-msg-example-selector"))){let t=$(o.attr("data-error-msg-example-selector")).clone();t.removeClass("hidden"),t.removeClass("d-none"),s.apiScriptLoading.errorMsg=t}C(o.attr("data-theme"))&&(s.theme=o.attr("data-theme")),r.settings=s,R(r,!1);let l=Math.floor(1e3*Math.random()+100);if(C(o.attr("id"))||o.attr("id",l+"_ReCaptchaTargetParent"),r.parentId=o.attr("id"),r.elementId=r.parentId+"__child",$('<div class="ReCaptchaTarget" id="'+r.elementId+'"></div>').appendTo(o),$('<div class="alertsParent"></div>').appendTo(o),r.AUTO_INIT){$('<input type="hidden" name="g-recaptcha-response" id="g-recaptcha-response" value="">').appendTo(o)}o.data("EasyCaptcha",r),q(r).then((function(){O(t,e+1,i,n)}),(function(t){s.failure(t??"Unknown error")}))}}async function q(t){await new Promise((function(e,i){!async function(t,e,i){const n="https://www.google.com/recaptcha/api.js?onload=EasyCaptchaScriptCallback&render=explicit";let s=$('script[src="'+n+'"]');if(0===s.length||"true"!==s.attr("loaded")){0!==s.length&&s.remove();let o=$("#"+i.parentId).find(".alertsParent");o.empty(),$(i.settings.apiScriptLoading.loadingMsg).appendTo(o),window.EasyCaptchaScriptCallback=()=>{$('script[src="'+n+'"]').attr("loaded","true"),t(),o.empty()};let r=document.createElement("script");r.src=n,r.async=!0,r.defer=!0,r.onerror=function(){e("EasyCaptchaScript_FAILED"),o.empty();let t=$(i.settings.apiScriptLoading.errorMsg);t.appendTo(o),t.find(".retry-load-api-script").on("click",(function(){q(i)}))},$("head")[0].appendChild(r)}else t()}(e,i,t)})).then((function(){!function(t){let e;E=window.grecaptcha,"string"==typeof t.settings.theme?e=t.settings.theme:"function"==typeof t.settings.theme&&(e=t.settings.theme());"light"!==e&&"dark"!==e&&(e="light");t.widgetId=E.render(t.elementId,{sitekey:t.settings.ReCAPTCHA_API_KEY_CLIENT,callback:()=>function(t){t.settings.ReCaptchaSubmit.success(),R(t,!0),w(t,E.getResponse(t.widgetId))}(t),"expired-callback":()=>function(t){t.settings.ReCaptchaSubmit.expired(),R(t,!1),w(t,"")}(t),"error-callback":()=>function(t){t.settings.ReCaptchaSubmit.failed(),R(t,!1),w(t,"")}(t),theme:e})}(t)}),(function(e){t.settings.apiScriptLoading.error(e)}))}let E;function w(t,e){t.AUTO_INIT&&$("#"+t.parentId).find('[name="g-recaptcha-response"]').val(e)}function R(t,e){if(null!=t.settings.autoVerification.okBtn){let i=$(t.settings.autoVerification.okBtn);i.prop("disabled",!e),e?i.removeClass("disabled"):i.addClass("disabled")}}function C(t){return null!=t&&""!==t}jQuery.fn.EasyCaptcha=y,$("[data-auto-easycaptcha]").EasyCaptcha(null);class T{constructor(t,e){this.formValidator=t,this.captchaOptions=e}init(t){t()}triggerRequiredError(){}}const x={label:"easycaptchajs"};class I extends T{init(t){if(this.prepare(),e(this.captchaOptions.ApiToken)){let t=$("meta[name='"+this.captchaOptions.metaName+"']");0===t.length?console.error("ApiToken is not defined, and no meta defined under name: "+this.captchaOptions.metaName):this.captchaOptions.ApiToken=t.attr("content")}$(this.target).EasyCaptcha($.extend(!0,this.formValidator.options.strings.captcha,{ReCAPTCHA_API_KEY_CLIENT:this.captchaOptions.ApiToken,autoVerification:{okBtn:this.formValidator.options.okBtn}})),t()}prepare(){if(e(this.formValidator.options.form))return void console.error("Form is not defined.");if(e(this.formValidator.options.okBtn))return void console.error("OkBtn is not defined.");let t=$("#ReCaptchaTarget");0===t.length&&(t=$('<div id="ReCaptchaTarget"></div>'),t.insertBefore(this.formValidator.options.okBtn)),this.target=t,this.captchaOptions=Object.assign(Object.assign({},A),this.formValidator.options.captcha)}triggerRequiredError(){}}I.label="easycaptchajs";const A={metaName:"google-recaptcha-api-token"};function M(t=null){if(null!==t)for(let e=0;e<t.length;e++)b.registerHandler(t[e]);else b.registerHandler(I);console.log("captchaHandlers",b.handlers)}class k{constructor(t={}){var i,n,s,r,a,l,d,u,c;if(this.options=new V,this.formValidatorStrings=t.strings?t.strings:{},this.validatorCallbacks=t.callbacks?t.callbacks:{},this.options.defaultConstraints=t.defaultConstraints?t.defaultConstraints:[],this.options.newConstraints=t.newConstraints?t.newConstraints:[],this.options.validationTrigger=null!==(i=t.validationTrigger)&&void 0!==i?i:m,this.options.validatorsSource=null!==(n=t.validatorsSource)&&void 0!==n?n:v,this.options.customValidations=null!==(s=t.customValidations)&&void 0!==s?s:[],this.options.fieldsValidators=null!==(r=t.fieldsValidators)&&void 0!==r?r:[],this.options.inputMessageRenderer=null!==(a=t.inputMessageRenderer)&&void 0!==a?a:{},this.options.form=o(t.form),this.options.okBtn=o(t.okBtn),this.options.loadWhileValidating=null===(l=t.loadWhileValidating)||void 0===l||l,this.options.verificationDuringLoading=null===(d=t.verificationDuringLoading)||void 0===d||d,this.options.captchaHandlersToRegister=null!==(u=t.captchaHandlersToRegister)&&void 0!==u?u:[],e(this.options.captcha)){let e=t.captcha;!0===e?this.options.captcha=x:"object"==typeof(c=e)&&"label"in c&&(this.options.captcha=Object.assign(Object.assign({},x),e))}}build(){return M(),Array.isArray(this.options.captchaHandlersToRegister)?M(this.options.captchaHandlersToRegister):M([this.options.captchaHandlersToRegister]),this.options.strings=Object.assign(Object.assign({},h),this.formValidatorStrings),this.options.callbacks=Object.assign(Object.assign({},p),this.validatorCallbacks),this.options.defaultConstraints=this.buildDefaultConstraints(),this.options}buildDefaultConstraints(){var t,e,i;return S([{name:"phoneNumber",presence:!0,length:{minimum:10,maximum:10},format:{pattern:"/^[0-9]+$/"}},{name:"username",presence:!0,length:{minimum:4,maximum:255},format:{pattern:"[a-z0-9.]*"}},{name:"email",presence:!0,email:!0,length:{maximum:255}},{name:"password",presence:!0,length:{minimum:6,maximum:255,tooShort:null===(e=null===(t=this.options.strings)||void 0===t?void 0:t.length)||void 0===e?void 0:e.passwordTooShort}},{name:"password_confirmation",presence:!0,equality:"password"},{name:"fname",presence:!0,length:{minimum:3,maximum:255},format:{pattern:"[a-zA-Z]+(?:\\s[a-zA-Z]+)*"}},{name:"lname",presence:!0,length:{minimum:3,maximum:255},format:{pattern:"[a-zA-Z]+(?:\\s[a-zA-Z]+)*"}},{name:"required",presence:!0}],null!==(i=this.options.defaultConstraints)&&void 0!==i?i:[])}}function S(t,e){const i=[];for(const n of t){const t=e.find((t=>(null==t?void 0:t.name)===(null==n?void 0:n.name)));t?i.push(Object.assign(Object.assign({},n),t)):n&&i.push(n)}return i}class V{constructor(){}static Builder(t){return new k(t)}}var j,N=i(765);!function(t){let e;t.DefaultMessage=class{constructor(t,e){this.messageData=t,this.messageRenderer=e}},function(t){t.SUCCESS="success",t.DANGER="danger",t.WARNING="warning",t.INFO="info"}(e=t.MessageStatus||(t.MessageStatus={}))}(j||(j={}));var B,L,_,D,P,H,F,z,U,W,G=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)},Y=j.MessageStatus;class K{constructor(t,e){B.add(this),this.fieldsValidators=[],this.formValidator=new at(V.Builder(t).build()),this.reqEaseOptions=e}build(){var t,i;return e(this.reqEaseOptions.form)||(this.formValidator.options.form=this.reqEaseOptions.form),e(this.reqEaseOptions.okBtn)||(this.formValidator.options.okBtn=this.reqEaseOptions.okBtn),G(this,B,"m",L).call(this),G(this,B,"m",_).call(this),this.formValidator.fieldsValidators=this.fieldsValidators,this.formValidator.customValidations=null!==(t=this.formValidator.options.customValidations)&&void 0!==t?t:[],this.formValidator.reqEaseOptions=this.reqEaseOptions,this.formValidator.validatorCallbacks=Object.assign({onSuccess:()=>{},onFailure:()=>{}},null!==(i=this.formValidator.options.callbacks)&&void 0!==i?i:{}),this.formValidator}}B=new WeakSet,L=function(){var t,i,n,s,o,r,a,l,d,u,c,h,p,f;N.validators.length.tooShort=e(null===(i=null===(t=this.formValidator.options.strings)||void 0===t?void 0:t.length)||void 0===i?void 0:i.defaultTooShort)?N.validators.length.tooShort:null===(s=null===(n=this.formValidator.options.strings)||void 0===n?void 0:n.length)||void 0===s?void 0:s.defaultTooShort,N.validators.length.tooLong=e(null===(r=null===(o=this.formValidator.options.strings)||void 0===o?void 0:o.length)||void 0===r?void 0:r.defaultTooLong)?N.validators.length.tooLong:null===(l=null===(a=this.formValidator.options.strings)||void 0===a?void 0:a.length)||void 0===l?void 0:l.defaultTooLong,N.validators.email.message=e(null===(u=null===(d=this.formValidator.options.strings)||void 0===d?void 0:d.format)||void 0===u?void 0:u.defaultInvalid)?N.validators.email.message:null===(h=null===(c=this.formValidator.options.strings)||void 0===c?void 0:c.format)||void 0===h?void 0:h.defaultInvalid,N.validators.presence.message=e(null===(p=this.formValidator.options.strings)||void 0===p?void 0:p.required)?N.validators.presence.message:null===(f=this.formValidator.options.strings)||void 0===f?void 0:f.required},_=function(){G(this,B,"m",D).call(this),G(this,B,"m",W).call(this)},D=function(){this.formValidator.options.validatorsSource===g.FULL?(this.formValidator.constraints=S(this.formValidator.options.defaultConstraints,this.formValidator.options.newConstraints),G(this,B,"m",P).call(this)):this.formValidator.options.validatorsSource===g.ONLY_DEFINED&&(this.formValidator.constraints=this.formValidator.options.newConstraints),G(this,B,"m",H).call(this)},P=function(){if(e(this.formValidator.options.form))return void(this.formValidator.options.validatorsSource===g.FULL&&console.error("Form is not defined. when you use 'validatorsSource' as 'FULL', you must define 'form' in ReqEaseOptions."));let t=this.formValidator.options.form.find("input, textarea, select");for(let e=0;e<t.length;e++){let i=$(t[e]),n=i.attr("name"),s=G(this,B,"m",F).call(this,i,n);this.fieldsValidators=[...this.fieldsValidators,...s]}},H=function(){var t;if(!e(this.formValidator.options.fieldsValidators))for(let i=0;i<this.formValidator.options.fieldsValidators.length;i++){let n,o,r=this.formValidator.options.fieldsValidators[i].field,a=this.formValidator.options.fieldsValidators[i].constraint;if(e(r))continue;if("function"==typeof r)o=s(r());else{if(void 0===(t=r)||"function"==typeof t)continue;o=s(r)}if(e(o))continue;n=o;let l=G(this,B,"m",F).call(this,n,a);this.fieldsValidators=[...this.fieldsValidators,...l]}},F=function(t,e){let i=G(this,B,"m",U).call(this,e);if(void 0===i)return[];let n=[];if(Array.isArray(t))for(let e=0;e<t.length;e++){let s=G(this,B,"m",z).call(this,t[e],i);void 0!==s&&n.push(s)}else{let e=G(this,B,"m",z).call(this,t,i);if(void 0===e)return n;n.push(e)}return n},z=function(t,e){let i=t.attr("data-validator-key");if("ignore"===i||"ignore"===e)return;let n=i&&""!==i?G(this,B,"m",U).call(this,i):e;if(void 0===n)return;n=Object.assign({},n);let s=`fieldValidator_${Math.floor(9e4*Math.random())+1e4}`;return n.name=s,{field:t,constraint:n,name:s}},U=function(t){var e,i;if(void 0!==t&&"string"!=typeof t)return t;let n=null===(e=this.formValidator.constraints)||void 0===e?void 0:e.find((e=>e.name===t));return null==n&&(n=null===(i=this.formValidator.constraints)||void 0===i?void 0:i.find((t=>"required"===t.name))),n},W=function(){this.formValidator.inputMessageRenderer=Object.assign(Object.assign({},J),this.formValidator.options.inputMessageRenderer)};const J={buildMessage:(t,e,i)=>$("<p class='validator-message text-"+i.status+"'>"+i.message+"</p>"),renderMessages:(t,i,n)=>{var s;let o=null!==(s=i.targetElement.parent(".form-group"))&&void 0!==s?s:i.targetElement.parent(),r=o.find(".validator-messages-parent");if(e(r)||0===r.length){let t=$('<div class="validator-messages-parent"></div>');t.appendTo(o),r=t}t.removeMessages(t,i);for(let e of n){t.buildMessage(t,i,e).appendTo(r)}},removeMessages:(t,e)=>{var i;let n=null!==(i=e.targetElement.parent(".form-group"))&&void 0!==i?i:e.targetElement.parent();n.find(".is-invalid").removeClass("is-invalid"),n.find(".is-valid").removeClass("is-valid"),n.find(".validator-messages-parent .validator-message").each((function(t,e){$(e).remove()}))},affectInput:(t,e,i)=>{let n=i[0];n.status===Y.SUCCESS?e.targetElement.addClass("is-valid"):n.status===Y.DANGER&&e.targetElement.addClass("is-invalid")}};var X=j.DefaultMessage;class Z extends X{constructor(t,e){super(t,e)}set targetElement(t){this._targetElement=t}get targetElement(){return this._targetElement}show(){this.messageRenderer.renderMessages(this.messageRenderer,this,this.messageData),this.eventListener=()=>{this.destroy()},this.targetElement.on("input",this.eventListener),this.messageRenderer.affectInput(this.messageRenderer,this,this.messageData)}destroy(){void 0!==this.eventListener&&this.targetElement.off("input",this.eventListener),this.messageRenderer.removeMessages(this.messageRenderer,this)}}var Q,tt,et,it,nt,st,ot=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)},rt=j.MessageStatus;class at{static Builder(t,e=c.Builder({}).build()){return new K(t,e)}constructor(t){Q.add(this),this.constraints=[],this.fieldsValidators=[],this.customValidations=[],this.options=t}validate(t=p){new Promise(((t,e)=>{let i=ot(this,Q,"m",it).call(this),n=ot(this,Q,"m",tt).call(this,i);if(n)return ot(this,Q,"m",et).call(this,n),void t(!1);ot(this,Q,"m",nt).call(this,(e=>{t(!!e)}))})).then((e=>{e?(this.validatorCallbacks.onSuccess(this),t.onSuccess(this)):(this.validatorCallbacks.onFailure(this),t.onFailure(this))}))}initiate(){var t;let e=ot(this,Q,"m",it).call(this),i=this.fieldsValidators;for(let t=0;t<i.length;t++){let n=i[t].field,s=t=>{let i=ot(this,Q,"m",tt).call(this,e),n=$(t.target),s=n.attr("name");i&&i[s]&&at.showInputError(n,i[s],this.inputMessageRenderer)};n.off("change",s),n.on("change",s)}if(this.options.captcha){b.createHandler(null!==(t=this.options.captcha.label)&&void 0!==t?t:"",this,this.options.captcha).init((()=>{console.log("captcha ready")}))}}static showInputError(t,e,i){let n=[];for(let t=0;t<e.length;t++)n.push({status:rt.DANGER,message:e[t]});let s=new Z(n,i);s.targetElement=t,s.show()}}Q=new WeakSet,tt=function(t){return(0,N.validate)($(this.options.form),t,{fullMessages:!1})},et=function(t){let e=this.fieldsValidators;for(let i=0;i<e.length;i++){let n=e[i].field,s=n.attr("name");t[s]&&at.showInputError(n,t[s],this.inputMessageRenderer)}},it=function(){let t={},e=this.fieldsValidators;for(let i=0;i<e.length;i++){let n=e[i].field.attr("name");t[n]=e[i].constraint,delete t[n].name}return t},nt=function t(e,i=0){if(i>=this.customValidations.length)return void e(!0);(0,this.customValidations[i])((n=>{n?ot(this,Q,"m",t).call(this,e,i+1):e(!1)}))};class lt{constructor(t,e){this.reqEaseOptions=t,this.reqEase=e}build(){}}class dt{static registerHandler(t){dt.handlers[t.label]=t}static createHandler(t,e,i){const n=dt.handlers[t];return n?new n(e,i):(console.error(`Modal handler with label "${t}" not registered.`),null)}}dt.handlers={};class ut{constructor(t,i){this.$modal=null,this.retry=()=>{},this.options=i,this.requester=t,this._modalCallbacks=[{onOpen:()=>{},onClose:()=>{},onAction:()=>{},onBeforeAction:(t,e)=>{e()}}],this._internalCallbacks={onOpen:()=>{for(let t=0;t<this._modalCallbacks.length;t++)e(this._modalCallbacks[t].onOpen)||this._modalCallbacks[t].onOpen()},onClose:()=>{for(let t=0;t<this._modalCallbacks.length;t++)e(this._modalCallbacks[t].onClose)||this._modalCallbacks[t].onClose()},onAction:t=>{for(let i=0;i<this._modalCallbacks.length;i++)e(this._modalCallbacks[i].onAction)||this._modalCallbacks[i].onAction(t)},onBeforeAction:(t,i)=>{for(let n=0;n<this._modalCallbacks.length;n++)e(this._modalCallbacks[n].onBeforeAction)||this._modalCallbacks[n].onBeforeAction(t,i)}},this.build()}get modalCallbacks(){return this._internalCallbacks}set modalCallbacks(t){this._modalCallbacks.push(t)}show(){}close(){}modalIsShowed(){return!1}build(){this.options.hasOwnProperty("loadingMessage")?this.buildLoadingModal(this.options):!function(t){return t.hasOwnProperty("progressMessage")}(this.options)?ht(this.options)?this.buildMessageModal(this.options):!function(t){return t.hasOwnProperty("confirm")}(this.options)?function(t){return t.hasOwnProperty("inputs")}(this.options)&&this.buildDataNeededModal(this.options):this.buildConfirmationModal(this.options):this.buildProgressModal(this.options)}buildLoadingModal(t){}buildProgressModal(t){}buildMessageModal(t){}buildConfirmationModal(t){}buildDataNeededModal(t){}buildIcon(){return ht(this.options)?(t=this.options.icon,[].includes(t),this.options.icon):"";var t}}function ct(t){let e;return e=!1!==t?t:"bootstrap",e}function ht(t){return t.hasOwnProperty("buttons")}function pt(t){return"string"==typeof t&&(t.startsWith("#")||t.startsWith("rgb"))}function ft(t){return!pt(t)}!function(t){let e;!function(t){let e;!function(t){t.CLOSE="close",t.REDIRECT="redirect",t.REFRESH="refresh",t.CONFIRM="confirm",t.CANCEL="cancel",t.RETRY="retry",t.CALL_FUNCTION="call-function"}(e=t.ActionType||(t.ActionType={})),t.isCloseAction=function(t){return t.actionType===e.CLOSE},t.isRedirectAction=function(t){return t.actionType===e.REDIRECT},t.isRefreshAction=function(t){return t.actionType===e.REFRESH},t.isConfirmAction=function(t){return t.actionType===e.CONFIRM},t.isCancelAction=function(t){return t.actionType===e.CANCEL},t.isRetryAction=function(t){return t.actionType===e.RETRY},t.isCallFunctionAction=function(t){return t.actionType===e.CALL_FUNCTION}}(e=t.Actions||(t.Actions={}))}(st||(st={}));var mt=st.Actions;class gt extends ut{constructor(t,e){super(t,e),this.retry=()=>{}}show(){let t=this;$.confirm(Object.assign(Object.assign({},Object.assign({scrollToPreviousElement:!1,scrollToPreviousElementAnimate:!1,closeIcon:!1,typeAnimated:!0},this.jconfirmOptions)),{onOpen:function(){t.$jconfirmModal=this,t.$modal=t.$jconfirmModal.$el,t.modalCallbacks.onOpen()},onClose:function(){t.modalCallbacks.onClose()}}))}close(){this.$jconfirmModal.close()}modalIsShowed(){return this.$jconfirmModal.isOpen()}buildLoadingModal(t){this.jconfirmOptions={icon:"fa fa-spinner fa-spin",title:"Loading",theme:bt(t.theme),content:t.loadingMessage,buttons:"",type:vt(t.color),columnClass:yt(t.size)}}buildProgressModal(t){}buildMessageModal(t){this.jconfirmOptions={icon:this.buildIcon(),title:t.title,theme:bt(t.theme),content:t.content,buttons:this.buildButtons(t.buttons),type:vt(t.color),columnClass:yt(t.size)}}buildConfirmationModal(t){var e,i,n,s,o,r,a,l,d,u,c,h,p,f,m,g,v;this.jconfirmOptions={icon:this.buildIcon(),title:"Confirmation",theme:bt(t.theme),content:null!==(a=null!==(e=t.confirmationMessage)&&void 0!==e?e:null===(r=null===(o=null===(s=null===(n=null===(i=this.requester)||void 0===i?void 0:i.requesterOptions)||void 0===n?void 0:n.strings)||void 0===s?void 0:s.response)||void 0===o?void 0:o.modals)||void 0===r?void 0:r.defaultConfirmationMsg)&&void 0!==a?a:"",buttons:this.buildButtons([{action:{actionType:mt.ActionType.CONFIRM},text:null!==(h=null===(c=null===(u=null===(d=null===(l=this.requester)||void 0===l?void 0:l.requesterOptions)||void 0===d?void 0:d.strings)||void 0===u?void 0:u.response)||void 0===c?void 0:c.confirmButton)&&void 0!==h?h:"Confirm",color:vt("info")},{action:{actionType:mt.ActionType.CANCEL},text:null!==(v=null===(g=null===(m=null===(f=null===(p=this.requester)||void 0===p?void 0:p.requesterOptions)||void 0===f?void 0:f.strings)||void 0===m?void 0:m.response)||void 0===g?void 0:g.cancelButton)&&void 0!==v?v:"Cancel",color:vt("default")}]),type:vt(t.color),columnClass:yt(t.size)}}buildDataNeededModal(t){var i;const n=t.inputs.map((t=>`\n            <div class="form-group">\n                <label for="${t.name}">${t.label}</label>\n                <input type="${t.type}" class="form-control" id="${t.name}" name="${t.name}">\n            </div>\n        `)).join("");let s="";e(t.message)||(s=`<p>${t.message}</p>`);const o=`\n            <div class="form pr-2 pl-2">\n                ${s}\n                ${n}\n            </div>\n        `;this.jconfirmOptions={icon:this.buildIcon(),title:t.title,theme:bt(t.theme),content:o,buttons:this.buildButtons([{action:{actionType:mt.ActionType.CONFIRM},text:"Confirm",color:null!==(i=t.color)&&void 0!==i?i:"default"},{action:{actionType:mt.ActionType.CANCEL},text:"Cancel",color:"default"}]),type:vt(t.color,"blue"),columnClass:yt(t.size)}}buildButtonAction(t){if(mt.isCloseAction(t.action))return()=>!0;if(mt.isRedirectAction(t.action)){let e=t.action,i=this;return(t,n)=>(t.$btnc.find(".btn").prop("disabled",!0),n.html(i.requester.loadingIndicator.loadingIndicatorOptions.spinnerIcon),window.location.href=e.url,!1)}if(mt.isRefreshAction(t.action)){let t=this;return(e,i)=>(e.$btnc.find(".btn").prop("disabled",!0),i.html(t.requester.loadingIndicator.loadingIndicatorOptions.spinnerIcon),window.location.reload(),!1)}if(mt.isCallFunctionAction(t.action)){let e=t.action,i=this;return(t,n)=>(t.$btnc.find(".btn").prop("disabled",!0),n.html(i.requester.loadingIndicator.loadingIndicatorOptions.spinnerIcon),"function"==typeof window[e.functionName]?window[e.functionName]():console.warn(`Function ${e.functionName} is not defined.`),!0)}return mt.isConfirmAction(t.action)||mt.isCancelAction(t.action)?()=>!0:mt.isRetryAction(t.action)?()=>(this.retry(),!0):void 0}buildButtons(t){let i={};for(let n=0;n<t.length;n++){let s=t[n],o=this;i[s.text]={text:s.text,btnClass:"btn-"+vt(s.color),action:function(){return o.modalCallbacks.onBeforeAction(s.action.actionType,(()=>{let t=o.buildButtonAction(s),i=!0;e(t)||(i=t(o.$jconfirmModal,o.$jconfirmModal.buttons[s.text].el)),i&&o.$jconfirmModal.close(),o.modalCallbacks.onAction(s.action.actionType)})),!1}}}return i}}function vt(t,i="default"){if(e(t)||pt(t))return"blue";switch(t){case"success":return"green";case"error":return"red";case"warning":return"orange";case"info":return"blue";default:return i}}function bt(t){return e(t)?"light":["dark","supervan","modern","material","bootstrap","light"].includes(t)?t:"light"}function yt(t){return e(t)?"medium":["","small","medium","large","xlarge"].includes(t)?t:"medium"}gt.label="jquery-confirm";var Ot=st.Actions.ActionType,qt=st.Actions;class Et extends ut{constructor(t,e){super(t,e),this.retry=()=>{}}show(){let t=this;this.$modal.on("shown.bs.modal",(function(){t.modalCallbacks.onOpen()})),this.$modal.modal("show")}close(){this.$modal.modal("hide"),this.modalCallbacks.onClose()}buildLoadingModal(t){var e;this.$modal=$(`\n            <div class="modal fade" tabindex="-1" role="dialog" data-backdrop="static">\n                <div class="modal-dialog modal-dialog-centered">\n                    <div class="modal-content">\n                        <div class="d-flex justify-content-center align-items-center pt-3 pb-3">\n                            <div class="spinner-border text-primary" role="status"></div>\n                            <p class="ml-2 mb-0">${null!==(e=t.loadingMessage)&&void 0!==e?e:"Please wait..."}</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `)}buildProgressModal(t){}buildMessageModal(t){var i,n,s,o,r,a,l;let d=this.buildIcon(),u="",c=[];if(!e(t.buttons))for(let e=0;e<t.buttons.length;e++)c.push(this.buildButtonAction(t.buttons[e]));for(let t=0;t<c.length;t++){let l="";if(e(c[t].color))u+=`<button type="button" class="btn-primary" id="${null!==(i=c[t].id)&&void 0!==i?i:""}">${null!==(n=c[t].text)&&void 0!==n?n:"action"}</button>`;else{let e=c[t].color;pt(e)?(""!==e&&(l=`background-color: ${e};`),u+=`<button type="button" class="btn" style="${l}" id="${null!==(s=c[t].id)&&void 0!==s?s:""}">${null!==(o=c[t].text)&&void 0!==o?o:"action"}</button>`):ft(e)&&(""!==e&&(l=` btn-${wt(e)}`),u+=`<button type="button" class="btn${l}" id="${null!==(r=c[t].id)&&void 0!==r?r:""}">${null!==(a=c[t].text)&&void 0!==a?a:"action"}</button>`)}}let h=t.content;e(h)||""===h||(h='<div class="modal-body">'+h+"</div>"),""!==u&&(u='<div class="modal-footer">'+u+"</div>");let p="";""===d&&""===t.title||(p=`<div class="modal-header"><div class="row"><h5 class="modal-title">${null!=d?d:""}${null!==(l=t.title)&&void 0!==l?l:""}</h5><div class="col-10"></div>`),this.$modal=$(`\n            <div class="modal fade" tabindex="-1" role="dialog" data-backdrop="static">\n                <div class="modal-dialog modal-dialog-centered">\n                    <div class="modal-content">\n                        ${p}\n                        ${h}\n                        ${u}\n                    </div>\n                </div>\n            </div>\n        `),this.$modal.find(".close").on("click",(()=>{this.$modal.modal("hide")}));let f=this;for(let t=0;t<c.length;t++)this.$modal.find("#"+c[t].id).on("click",(()=>{var e;f.modalCallbacks.onBeforeAction(null!==(e=c[t].actionType)&&void 0!==e?e:"unknown",(()=>{var e;c[t].action(f.$modal)&&f.$modal.modal("hide"),f.modalCallbacks.onAction(null!==(e=c[t].actionType)&&void 0!==e?e:"unknown")}))}))}buildConfirmationModal(t){var e,i,n,s,o,r,a,l,d,u,c,h,p,f,m,g,v;let b={title:"",content:null!==(a=null!==(e=t.confirmationMessage)&&void 0!==e?e:null===(r=null===(o=null===(s=null===(n=null===(i=this.requester)||void 0===i?void 0:i.requesterOptions)||void 0===n?void 0:n.strings)||void 0===s?void 0:s.response)||void 0===o?void 0:o.modals)||void 0===r?void 0:r.defaultConfirmationMsg)&&void 0!==a?a:"",buttons:[{action:{actionType:Ot.CONFIRM},text:null!==(h=null===(c=null===(u=null===(d=null===(l=this.requester)||void 0===l?void 0:l.requesterOptions)||void 0===d?void 0:d.strings)||void 0===u?void 0:u.response)||void 0===c?void 0:c.confirmButton)&&void 0!==h?h:"Confirm",color:"info"},{action:{actionType:Ot.CANCEL},text:null!==(v=null===(g=null===(m=null===(f=null===(p=this.requester)||void 0===p?void 0:p.requesterOptions)||void 0===f?void 0:f.strings)||void 0===m?void 0:m.response)||void 0===g?void 0:g.cancelButton)&&void 0!==v?v:"Cancel",color:"default"}]};this.buildMessageModal(b)}buildButtonAction(t){if(qt.isCloseAction(t.action))return{actionType:t.action.actionType,text:t.text,color:t.color,id:"btn-"+Math.random().toString(36).substring(2,12),action:()=>!0};if(qt.isRedirectAction(t.action)){let e=t.action,i=this;return{actionType:t.action.actionType,text:t.text,color:t.color,id:"btn-"+Math.random().toString(36).substring(2,12),action:t=>(t.find(".modal-footer .btn").prop("disabled",!0),$(this).html(i.requester.loadingIndicator.loadingIndicatorOptions.spinnerIcon),window.location.href=e.url,!1)}}if(qt.isRefreshAction(t.action)){let e=this;return{actionType:t.action.actionType,text:t.text,color:t.color,id:"btn-"+Math.random().toString(36).substring(2,12),action:t=>(t.find(".modal-footer .btn").prop("disabled",!0),$(this).html(e.requester.loadingIndicator.loadingIndicatorOptions.spinnerIcon),window.location.reload(),!1)}}if(qt.isCallFunctionAction(t.action)){let e=t.action,i=this;return{actionType:t.action.actionType,text:t.text,color:t.color,id:"btn-"+Math.random().toString(36).substring(2,12),action:t=>(t.find(".modal-footer .btn").prop("disabled",!0),$(this).html(i.requester.loadingIndicator.loadingIndicatorOptions.spinnerIcon),"function"==typeof window[e.functionName]?window[e.functionName]():console.warn(`Function ${e.functionName} is not defined.`),!0)}}return qt.isConfirmAction(t.action)?{actionType:t.action.actionType,text:t.text,color:t.color,id:"btn-confirm",action:()=>!0}:qt.isCancelAction(t.action)?{actionType:t.action.actionType,text:t.text,color:t.color,id:"btn-cancel",action:()=>!0}:qt.isRetryAction(t.action)?{actionType:t.action.actionType,text:t.text,color:t.color,id:"btn-retry",action:()=>(this.retry(),!0)}:void 0}modalIsShowed(){return this.$modal.hasClass("show")}}function wt(t){switch(t){case"success":case"warning":return t;case"error":return"danger";case"info":case"default":return"primary"}}function Rt(t=null){if(null!==t)for(let e=0;e<t.length;e++)dt.registerHandler(t[e]);else dt.registerHandler(gt),dt.registerHandler(Et);console.log("modalHandlers",dt.handlers)}Et.label="bootstrap";var Ct=st.Actions;class Tt{static registerHandler(t){Tt.handlers[t.label]=t}static createHandler(t,e,i){const n=Tt.handlers[t];return n?new n(e,i):(console.error(`Response handler with label "${t}" not registered.`),null)}static showUnknownErrorWithRetry(t,e){var i,n,s,o,r,a,l,d,u,c,h,p,f,m,g,v,b,y,O,q;let E=Tt.createHandler("message",t,{buttons:[{action:{actionType:Ct.ActionType.RETRY},color:"error",text:null!==(o=null===(s=null===(n=null===(i=null==t?void 0:t.requesterOptions)||void 0===i?void 0:i.strings)||void 0===n?void 0:n.response)||void 0===s?void 0:s.retryButton)&&void 0!==o?o:""},{action:{actionType:Ct.ActionType.CLOSE},color:"default",text:null!==(d=null===(l=null===(a=null===(r=null==t?void 0:t.requesterOptions)||void 0===r?void 0:r.strings)||void 0===a?void 0:a.response)||void 0===l?void 0:l.closeButton)&&void 0!==d?d:""}],color:"error",content:{body:null!==(m=null===(f=null===(p=null===(h=null===(c=null===(u=null==t?void 0:t.requesterOptions)||void 0===u?void 0:u.strings)||void 0===c?void 0:c.response)||void 0===h?void 0:h.modals)||void 0===p?void 0:p.unknownErrorWithRetry)||void 0===f?void 0:f.message)&&void 0!==m?m:"",title:null!==(q=null===(O=null===(y=null===(b=null===(v=null===(g=null==t?void 0:t.requesterOptions)||void 0===g?void 0:g.strings)||void 0===v?void 0:v.response)||void 0===b?void 0:b.modals)||void 0===y?void 0:y.unknownErrorWithRetry)||void 0===O?void 0:O.title)&&void 0!==q?q:""},type:"medium"});E.retry=e,E.renderResponse()}}Tt.handlers={};class xt{prepare(){}constructor(t,e){this.retry=()=>{},this.response=e,this.requester=t}renderResponse(){}}function It(t){switch(t){case"big":return"large";case"medium":return"medium"}}function At(t){return["big","medium"].includes(t)}var Mt=j.DefaultMessage;class kt extends Mt{constructor(t,e,i){super(t,e),this.form=i}destroy(){this.messageRenderer.removeMessages(this.messageRenderer,this)}show(){this.messageRenderer.renderMessages(this.messageRenderer,this,this.messageData)}}const $t={buildMessage:(t,i,n)=>{var s;let o="";if(!e(n.buttons))for(let t of n.buttons)o+=`<button class="btn btn-sm btn-outline-${null!==(s=t.color)&&void 0!==s?s:n.status}" type="button">${t.text}</button>`;""!==o&&(o=`<hr><div class="buttons mt-3 mb-2">${o}</div>`);return $("<div class='form-message alert alert-"+n.status+' alert-dismissible fade show\'><button type="button" class="close" data-dismiss="alert" aria-label="Close">\n    <span aria-hidden="true">&times;</span>\n  </button>'+n.message+o+"</div>")},renderMessages:(t,i,n)=>{if(e(i.form))return void console.error("FormMessageRenderer: form is undefined");let s=i.form,o=s.find(".form-messages-parent");if(e(o)||0===o.length){let t=$('<div class="form-messages-parent"></div>'),e=s.find(".btn").last();0===e.length&&(e=s.find('button[type="submit"]').last()),e.parent().hasClass("form-group")&&(e=e.parent()),t.insertBefore(e),o=t}t.removeMessages(t,i);for(let e of n){t.buildMessage(t,i,e).appendTo(o)}},removeMessages:(t,e)=>{e.form.find(".form-messages-parent .form-message").each((function(t,e){$(e).remove()}))}};var St=j.DefaultMessage;class Vt extends St{constructor(t,e){super(t,e)}destroy(){}show(){this.messageRenderer.renderMessages(this.messageRenderer,this,this.messageData)}}const jt={buildMessage:(t,e,i)=>$('<div class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-autohide="false"><div class="toast-header">\n    <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">\n      <span aria-hidden="true">&times;</span>\n    </button>\n  </div><div class="toast-body">'+i.message+"</div></div>"),renderMessages:(t,i,n)=>{let s=$("body").find(".form-messages-parent");if(e(s)||0===s.length){let t=$('<div style="position: fixed; bottom: 0; right: 0;" class="pr-4 pb-4"></div>');t.appendTo("body"),s=t}for(let e of n){t.buildMessage(t,i,e).appendTo(s).toast("show")}},removeMessages:(t,e)=>{}};class Nt extends xt{constructor(){super(...arguments),this.message=null,this.retry=()=>{}}prepare(){var t,e,i,n,s,o,r,a,l,d;if(At(this.response.type)){let u=ct(this.requester.requesterOptions.useReadyModal);this.modalHandler=dt.createHandler(u,this.requester,{title:null!==(i=null===(e=null===(t=this.response)||void 0===t?void 0:t.content)||void 0===e?void 0:e.title)&&void 0!==i?i:"",content:null!==(o=null===(s=null===(n=this.response)||void 0===n?void 0:n.content)||void 0===s?void 0:s.body)&&void 0!==o?o:"",buttons:null!==(a=null===(r=this.response)||void 0===r?void 0:r.buttons)&&void 0!==a?a:[],color:null!==(d=null===(l=this.response)||void 0===l?void 0:l.color)&&void 0!==d?d:"primary",size:It(this.response.type)}),this.modalHandler.retry=this.retry}else if("in-form"===this.response.type){let t=(""!==this.response.content.title?"<b>"+this.response.content.title+"</b>: ":"")+this.response.content.body;this.message=new kt([{message:t,status:this.response.color,buttons:this.response.buttons}],this.requester.requesterOptions.formMessageRenderer,this.requester.requesterOptions.form)}else"toast"===this.response.type?this.message=new Vt([{message:this.response.content.body,status:this.response.color}],this.requester.requesterOptions.toastMessageRenderer):console.error("Unknown response type ('"+this.response.type+"')")}renderResponse(){this.prepare(),At(this.response.type)?this.modalHandler.show():e(this.message)||this.message.show()}}Nt.label="message";class Bt extends xt{prepare(){if(!e(this.response.fieldsWithErrors))for(let t in this.response.fieldsWithErrors){let e=$('[name="'+t+'"]');0!==e.length?at.showInputError(e,this.response.fieldsWithErrors[t],this.requester.requesterOptions.inputMessageRenderer):console.error("Field with name '"+t+"' not found")}}renderResponse(){this.prepare()}}function Lt(t=null){if(null!==t)for(let e=0;e<t.length;e++)Tt.registerHandler(t[e]);else Tt.registerHandler(Nt),Tt.registerHandler(Bt)}Bt.label="fields_validation_error";const _t={response:{modals:{data_needed:{title:"Almost there !",message:"You should fill the following fields to continue."},unknownErrorWithRetry:{title:"Unknown Error",message:"Unexpected response format. Please try again."},defaultConfirmationMsg:"Are you sure you want to continue?"},retryButton:"Retry",closeButton:"Close",yesButton:"Yes",noButton:"No",confirmButton:"Confirm",cancelButton:"Cancel",okButton:"OK"},loading:{loadingMessage:"Loading..."}};class Dt{constructor(t,e=null){var i,n,s,o;this.requesterOptions=new Pt,this.requesterOptionsEntered=t,this.requesterOptions.useReadyModal=null!==(i=t.useReadyModal)&&void 0!==i&&i,this.requesterOptions.loading=t.loading,this.requesterOptions.modalHandlersToRegister=null!==(n=t.modalHandlersToRegister)&&void 0!==n?n:[],this.requesterOptions.responseHandlersToRegister=null!==(s=t.responseHandlersToRegister)&&void 0!==s?s:[],this.requesterOptions.strings=$.extend(!0,_t,null!==(o=t.strings)&&void 0!==o?o:{}),this.reqEase=e}build(){var t,i,n,s,r,a,l,d,u,c,h,p,f;return Rt(),Lt(),Array.isArray(this.requesterOptions.modalHandlersToRegister)?Rt(this.requesterOptions.modalHandlersToRegister):Rt([this.requesterOptions.modalHandlersToRegister]),Array.isArray(this.requesterOptions.responseHandlersToRegister)?Lt(this.requesterOptions.responseHandlersToRegister):Lt([this.requesterOptions.responseHandlersToRegister]),this.requesterOptions.showConfirmModal=null===(t=this.requesterOptionsEntered.showConfirmModal)||void 0===t||t,this.requesterOptions.form=o(this.requesterOptionsEntered.form),this.requesterOptions.okBtn=o(this.requesterOptionsEntered.okBtn),e(this.requesterOptions.form)||(this.requesterOptionsEntered.request=$.extend(!0,{url:null!==(i=this.requesterOptions.form.attr("action"))&&void 0!==i?i:null,method:null!==(n=this.requesterOptions.form.attr("method"))&&void 0!==n?n:null,dataType:null!==(s=this.requesterOptions.form.attr("data-type"))&&void 0!==s?s:null,contentType:null!==(r=this.requesterOptions.form.attr("content-type"))&&void 0!==r?r:null},this.requesterOptionsEntered.request)),this.requesterOptions.fields=null!==(a=this.requesterOptionsEntered.fields)&&void 0!==a?a:e(this.requesterOptions.form)?[]:"auto",this.requesterOptions.requestData=null!==(l=this.requesterOptionsEntered.requestData)&&void 0!==l?l:{},this.requesterOptions.intendedRedirect=null!==(d=this.requesterOptionsEntered.intendedRedirect)&&void 0!==d?d:"key:intendedRedirect",this.requesterOptions.intendedRedirectPriority=null!==(u=this.requesterOptionsEntered.intendedRedirectPriority)&&void 0!==u&&u,e(this.requesterOptionsEntered.inputMessageRenderer)?this.requesterOptions.inputMessageRenderer=null===(h=null===(c=this.reqEase)||void 0===c?void 0:c.formValidator)||void 0===h?void 0:h.inputMessageRenderer:this.requesterOptions.inputMessageRenderer=Object.assign(Object.assign({},J),this.requesterOptions.inputMessageRenderer),this.requesterOptions.formMessageRenderer=Object.assign(Object.assign({},$t),null!==(p=this.requesterOptions.formMessageRenderer)&&void 0!==p?p:{}),this.requesterOptions.toastMessageRenderer=Object.assign(Object.assign({},jt),null!==(f=this.requesterOptions.toastMessageRenderer)&&void 0!==f?f:{}),this.requesterOptions.request=this.requesterOptionsEntered.request,this.requesterOptions.response=this.requesterOptionsEntered.response,this.requesterOptions}}class Pt{static Builder(t,e=null){return new Dt(t,e)}}var Ht;!function(t){t.LOADING="loading",t.NOT_LOADING="not-loading"}(Ht||(Ht={}));const Ft={loadingInModal:!0,modalOptions:{loadingMessage:"Verifying in progress..."},loadingIndicatorActions:{affectButton:(t,i,n)=>{e(t.requester.requesterOptions.okBtn)||(t.requester.requesterOptions.okBtn.prop("disabled",n!==Ht.NOT_LOADING),n===Ht.LOADING?(t.requester.requesterOptions.okBtn.data("original-content",t.requester.requesterOptions.okBtn.html()),t.requester.requesterOptions.okBtn.html(t.loadingIndicatorOptions.spinnerIcon)):t.requester.requesterOptions.okBtn.html(t.requester.requesterOptions.okBtn.data("original-content")),t.requester.requesterOptions.okBtn.data("data-loading-state",n))}}};class zt{constructor(t,e){this.loadingIndicatorOptionsEntered=e,this.requester=t}build(){var t,i,n,s,o,r,a;let l,d,u;return l=$.extend(!0,Ft,{modalOptions:{loadingMessage:null!==(o=null===(s=null===(n=null===(i=null===(t=this.requester)||void 0===t?void 0:t.requesterOptions)||void 0===i?void 0:i.strings)||void 0===n?void 0:n.loading)||void 0===s?void 0:s.loadingMessage)&&void 0!==o?o:Ft.modalOptions.loadingMessage}}),d=!1!==this.requester.requesterOptions.useReadyModal?this.requester.requesterOptions.useReadyModal:"bootstrap",e(this.loadingIndicatorOptionsEntered)||(l=$.extend(!0,l,this.loadingIndicatorOptionsEntered)),u={loadingInModal:null!==(r=l.loadingInModal)&&void 0!==r&&r,loadingIndicatorActions:$.extend(!0,l.loadingIndicatorActions,{modalHandler:dt.createHandler(d,this.requester,l.modalOptions)}),spinnerIcon:null!==(a=l.spinnerIcon)&&void 0!==a?a:'<div class="spinner-border" role="status"></div>'},u}}class Ut{constructor(t,e){this.requester=t,this.loadingIndicatorOptions=new zt(t,e).build()}startLoading(){return new Promise((t=>{this.loadingIndicatorOptions.loadingIndicatorActions.affectButton(this,this.loadingIndicatorOptions.loadingIndicatorActions,Ht.LOADING),this.loadingIndicatorOptions.loadingInModal?(this.loadingIndicatorOptions.loadingIndicatorActions.modalHandler.show(),this.loadingIndicatorOptions.loadingIndicatorActions.modalHandler.modalCallbacks.onOpen=()=>{t(!0)}):t(!0)}))}stopLoading(){this.isLoading()&&(this.loadingIndicatorOptions.loadingInModal&&this.loadingIndicatorOptions.loadingIndicatorActions.modalHandler.close(),this.loadingIndicatorOptions.loadingIndicatorActions.affectButton(this,this.loadingIndicatorOptions.loadingIndicatorActions,Ht.NOT_LOADING))}isLoading(){return this.loadingIndicatorOptions.loadingInModal?this.loadingIndicatorOptions.loadingIndicatorActions.modalHandler.modalIsShowed():!!this.requester.requesterOptions.okBtn&&this.requester.requesterOptions.okBtn.prop("disabled")}}class Wt{constructor(t,e){this.requesterOptionsEntered=t,this.requester=new ae,this.reqEase=e}build(){var t,e;return this.requesterOptionsEntered.form=null!==(t=this.requesterOptionsEntered.form)&&void 0!==t?t:this.reqEase.reqEaseOptions.form,this.requesterOptionsEntered.okBtn=null!==(e=this.requesterOptionsEntered.okBtn)&&void 0!==e?e:this.reqEase.reqEaseOptions.okBtn,this.requester.requesterOptions=Pt.Builder(this.requesterOptionsEntered,this.reqEase).build(),this.requester.reqEaseOptions=this.reqEase.reqEaseOptions,this.requester.loadingIndicator=new Ut(this.requester,this.requester.requesterOptions.loading),this.requester}}var Gt;!function(t){t.JSON="json",t.TEXT="text",t.HTML="html"}(Gt||(Gt={}));Gt.JSON;var Yt;!function(t){t.GET="GET",t.POST="POST",t.PUT="PUT",t.DELETE="DELETE"}(Yt||(Yt={}));Yt.POST;let Kt={url:null,data:{},dataType:Gt.JSON,headers:{},method:Yt.POST,beforeSend:()=>{},ajaxExtraOptions:{}};var Jt,Xt,Zt,Qt=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};class te{constructor(t,e){Jt.add(this),this.requesterOptions=t,this.requestOptionsEntered=e,this.request=new ee}build(){var t,i,s;if(this.request.requestOptions=n(Qt(this,Jt,"m",Xt).call(this),null!==(t=this.requestOptionsEntered)&&void 0!==t?t:{},["ajaxExtraOptions","beforeSend","headers"]),!e(this.requesterOptions.fields))if("auto"===this.requesterOptions.fields)if(e(this.requesterOptions.form)||0===this.requesterOptions.form.length)console.error("Form is not defined.");else{let t=this.requesterOptions.form.serializeArray();console.log(t);let e={};for(let i=0;i<t.length;i++)e[t[i].name]=t[i].value;this.request.requestOptions.data=Object.assign(Object.assign({},this.request.requestOptions.data),e)}else for(let t=0;t<this.requesterOptions.fields.length;t++){let e=r(this.requesterOptions.fields[t]);0!==e.length&&(this.request.requestOptions.data[e.attr("name")]=e.val())}if(e(this.requesterOptions.requestData)||("function"==typeof this.requesterOptions.requestData?this.requesterOptions.requestData((t=>{this.request.requestOptions.data=Object.assign(Object.assign({},this.request.requestOptions.data),t)})):this.request.requestOptions.data=Object.assign(Object.assign({},this.request.requestOptions.data),this.requesterOptions.requestData)),this.request.requestOptions=n(this.request.requestOptions,null!==(s=null===(i=this.requestOptionsEntered)||void 0===i?void 0:i.ajaxExtraOptions)&&void 0!==s?s:{},["beforeSend"]),this.request.requestOptions.beforeSend=(t,i)=>{var n;for(let e in this.request.requestOptions.headers)t.setRequestHeader(e,this.request.requestOptions.headers[e]);if(!e(null===(n=this.requestOptionsEntered)||void 0===n?void 0:n.beforeSend))return this.requestOptionsEntered.beforeSend(t,i)},!1!==this.requesterOptions.intendedRedirect){let t;if("string"==typeof this.requesterOptions.intendedRedirect&&this.requesterOptions.intendedRedirect.startsWith("key:")){let e=this.requesterOptions.intendedRedirect.substring(4);t=new URL(window.location.href).searchParams.get(e)}else t="function"==typeof this.requesterOptions.intendedRedirect?this.requesterOptions.intendedRedirect():this.requesterOptions.intendedRedirect;e(t)||""===t||(this.request.requestOptions.data.__intendedRedirect__=t)}return this.request}}Jt=new WeakSet,Xt=function(){return Kt};class ee{constructor(){this.callbacks_={onResponseSuccess:(t,e,i)=>{},onResponseError:(t,e,i)=>{},onResponse:(t,e,i)=>{},onInternalError:t=>{}}}get callbacks_(){return this._callbacks_}set callbacks_(t){this._callbacks_=t}static Builder(t,e){return new te(t,e)}startRequest(){e(this.requestOptions.url)?this.callbacks_.onInternalError("url is not defined"):$.ajax(this.requestOptions).done(((t,e,i)=>{this.callbacks_.onResponse(t,!1,{data:t,textStatus:e,jqXHR:i}),this.callbacks_.onResponseSuccess(t,!1,{data:t,textStatus:e,jqXHR:i})})).fail(((t,e,i)=>{this.callbacks_.onResponse(t.responseJSON,!1,{jqXHR:t,textStatus:e,errorThrown:i}),this.callbacks_.onResponseError(t.responseJSON,!1,{jqXHR:t,textStatus:e,errorThrown:i})}))}}class ie{constructor(t,e){this.requesterOptions=t,this.httpResponseOptionsEntered=e,this.httpResponse=new ne}build(){return this.httpResponse.httpResponseOptions=$.extend(!0,{autoResponseRender:!0,rejectUnknownResponse:!0,callbacks:{onResponse:()=>{},onResponseError:()=>{},onResponseSuccess:()=>{},onInternalError:()=>{}}},this.httpResponseOptionsEntered),this.httpResponse}}!function(t){function i(t){return!e(t)&&"object"==typeof t&&"version"in t&&"httpCode"in t}function n(t){return"type"in t&&!e(t.type)&&"content"in t}function s(t){return"progress"in t&&!e(t.progress)&&"maxProgress"in t&&!e(t.maxProgress)}function o(t){return"neededData"in t&&!e(t.neededData)}function r(t){return"fieldsWithErrors"in t}t.isResponse=i,t.isCustomResponse=function(t){return!e(t)&&"object"==typeof t&&"label"in t&&!e(t.label)},t.isMessageResponse=n,t.isProgressResponse=s,t.isDataNeededResponse=o,t.isFieldsValidationErrorResponse=r,t.getResponseLabel=function(t){if(i(t)){if(n(t))return"message";if(s(t))return"progress";if(o(t))return"data_needed";if(r(t))return"fields_validation_error"}return t.label}}(Zt||(Zt={}));class ne{static Builder(t,e){return new ie(t,e)}handle(t,i){if(this.httpResponseOptions.callbacks.onResponse(t,!1,i),!Zt.isResponse(t)&&!Zt.isCustomResponse(t))return void(this.httpResponseOptions.rejectUnknownResponse&&Tt.showUnknownErrorWithRetry(this.requester,(()=>{this.requester.retry()})));let n=Zt.getResponseLabel(t);console.log("label",n);let s=Tt.createHandler(n,this.requester,t);e(s)||s.renderResponse()}}var se,oe,re=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};class ae{constructor(){se.add(this)}static Builder(t,e=null){return new Wt(t,e)}init(){if(e(this.reqEaseOptions)){if(e(this.requesterOptions.okBtn))return void console.error("okBtn is required");this.requesterOptions.okBtn.on("click",(()=>{this.start()}))}else this.start()}addParams(t){this.httpRequest.requestOptions.data=Object.assign(Object.assign({},this.httpRequest.requestOptions.data),t)}start(){re(this,se,"m",oe).call(this),console.log("Requester started"),this.httpRequest.callbacks_={onResponseSuccess:(t,e,i)=>{this.httpResponse.handle(t,i)},onResponseError:(t,e,i)=>{this.httpResponse.handle(t,i)},onResponse:(t,e,i)=>{this.loadingIndicator.stopLoading()},onInternalError:t=>{console.error("internal error",t),this.loadingIndicator.stopLoading()}},new Promise((t=>{if(this.requesterOptions.showConfirmModal){let e=ct(this.requesterOptions.useReadyModal),i=dt.createHandler(e,this,{confirm:()=>{t(!0)},cancel:()=>{t(!1)}});null==i||i.show()}else t(!0)})).then((t=>{t&&new Promise((t=>{this.loadingIndicator.isLoading()?t(!0):this.loadingIndicator.startLoading().then((()=>t(!0)))})).then((()=>{this.httpRequest.startRequest()}))}))}retry(){this.start()}}se=new WeakSet,oe=function(){console.log("Requester prepare",this.requesterOptions),this.httpRequest=ee.Builder(this.requesterOptions,this.requesterOptions.request).build(),this.httpResponse=ne.Builder(this.requesterOptions,this.requesterOptions.response).build(),this.httpRequest.requester=this,this.httpResponse.requester=this,this.httpRequest.requesterOptions=this.requesterOptions,this.httpResponse.requesterOptions=this.requesterOptions};var le,de,ue=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};class ce{constructor(t={}){le.add(this),this.reqEaseOptions=c.Builder(t).build(),ce.Builder(t,this).build(),ue(this,le,"m",de).call(this),this.start()}static Builder(t,e){return new lt(t,e)}start(){console.log(this.requester),this.reqEaseOptions.buildMode===t.EVERYTIME&&ue(this,le,"m",de).call(this),e(this.reqEaseOptions.okBtn)?console.error("okBtn is required"):(this.formValidator.initiate(),this.reqEaseOptions.okBtn.on("click",(()=>{new Promise((t=>{this.formValidator.options.verificationDuringLoading?this.requester.loadingIndicator.startLoading().then((()=>t(!0))):t(!0)})).then((()=>{this.formValidator.validate({onSuccess:()=>{this.requester.init()},onFailure:()=>{console.log("validation failed -_-",this.requester.loadingIndicator.isLoading()),this.requester.loadingIndicator.stopLoading()}})}))})))}}function he(t){let e=$(this).data("reqease");return void 0!==e||(e=new ce($.extend(!0,t,{form:$(this)})),$(this).data("reqease",e)),e}le=new WeakSet,de=function(){var t,e;this.formValidator=at.Builder(null!==(t=this.reqEaseOptions.validation)&&void 0!==t?t:{},this.reqEaseOptions).build(),this.requester=ae.Builder(null!==(e=this.reqEaseOptions.requester)&&void 0!==e?e:{},this).build()},jQuery.fn.ReqEase=he,window.ReqEase=ce,window.Requester=ae,window.FormValidator=at})()})();